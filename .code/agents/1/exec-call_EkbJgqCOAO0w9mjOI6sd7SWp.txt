
> codecrucible-synth@4.2.4 test:fast
> node node_modules/jest/bin/jest.js --config jest.config.unit.cjs --maxWorkers=75%

jest-haste-map: duplicate manual mock found: chalk
  The following files share their name; please delete one of them:
    * <rootDir>\tests\__mocks__\chalk.js
    * <rootDir>\.code\branches\code-claude-refactor-very-large\tests\__mocks__\chalk.js

jest-haste-map: duplicate manual mock found: heavy-modules
  The following files share their name; please delete one of them:
    * <rootDir>\tests\__mocks__\heavy-modules.ts
    * <rootDir>\.code\branches\code-claude-refactor-very-large\tests\__mocks__\heavy-modules.ts

jest-haste-map: duplicate manual mock found: inquirer
  The following files share their name; please delete one of them:
    * <rootDir>\tests\__mocks__\inquirer.js
    * <rootDir>\.code\branches\code-claude-refactor-very-large\tests\__mocks__\inquirer.js

jest-haste-map: duplicate manual mock found: ora
  The following files share their name; please delete one of them:
    * <rootDir>\tests\__mocks__\ora.js
    * <rootDir>\.code\branches\code-claude-refactor-very-large\tests\__mocks__\ora.js

jest-haste-map: duplicate manual mock found: chalk
  The following files share their name; please delete one of them:
    * <rootDir>\.code\branches\code-claude-refactor-very-large\tests\__mocks__\chalk.js
    * <rootDir>\.code\branches\code-gemini-refactor-very-large\tests\__mocks__\chalk.js

jest-haste-map: duplicate manual mock found: heavy-modules
  The following files share their name; please delete one of them:
    * <rootDir>\.code\branches\code-claude-refactor-very-large\tests\__mocks__\heavy-modules.ts
    * <rootDir>\.code\branches\code-gemini-refactor-very-large\tests\__mocks__\heavy-modules.ts

jest-haste-map: duplicate manual mock found: inquirer
  The following files share their name; please delete one of them:
    * <rootDir>\.code\branches\code-claude-refactor-very-large\tests\__mocks__\inquirer.js
    * <rootDir>\.code\branches\code-gemini-refactor-very-large\tests\__mocks__\inquirer.js

jest-haste-map: duplicate manual mock found: ora
  The following files share their name; please delete one of them:
    * <rootDir>\.code\branches\code-claude-refactor-very-large\tests\__mocks__\ora.js
    * <rootDir>\.code\branches\code-gemini-refactor-very-large\tests\__mocks__\ora.js

jest-haste-map: duplicate manual mock found: heavy-modules
  The following files share their name; please delete one of them:
    * <rootDir>\.code\branches\code-gemini-refactor-very-large\tests\__mocks__\heavy-modules.ts
    * <rootDir>\.code\branches\code-code-refactor-very-large\tests\__mocks__\heavy-modules.ts

jest-haste-map: duplicate manual mock found: chalk
  The following files share their name; please delete one of them:
    * <rootDir>\.code\branches\code-gemini-refactor-very-large\tests\__mocks__\chalk.js
    * <rootDir>\.code\branches\code-code-refactor-very-large\tests\__mocks__\chalk.js

jest-haste-map: duplicate manual mock found: inquirer
  The following files share their name; please delete one of them:
    * <rootDir>\.code\branches\code-gemini-refactor-very-large\tests\__mocks__\inquirer.js
    * <rootDir>\.code\branches\code-code-refactor-very-large\tests\__mocks__\inquirer.js

jest-haste-map: duplicate manual mock found: ora
  The following files share their name; please delete one of them:
    * <rootDir>\.code\branches\code-gemini-refactor-very-large\tests\__mocks__\ora.js
    * <rootDir>\.code\branches\code-code-refactor-very-large\tests\__mocks__\ora.js

jest-haste-map: duplicate manual mock found: src/core/cli
  The following files share their name; please delete one of them:
    * <rootDir>\tests\__mocks__\src\core\cli.ts
    * <rootDir>\.code\branches\code-claude-refactor-very-large\tests\__mocks__\src\core\cli.ts

jest-haste-map: duplicate manual mock found: src/core/cli
  The following files share their name; please delete one of them:
    * <rootDir>\.code\branches\code-claude-refactor-very-large\tests\__mocks__\src\core\cli.ts
    * <rootDir>\.code\branches\code-gemini-refactor-very-large\tests\__mocks__\src\core\cli.ts

jest-haste-map: duplicate manual mock found: src/core/cli
  The following files share their name; please delete one of them:
    * <rootDir>\.code\branches\code-gemini-refactor-very-large\tests\__mocks__\src\core\cli.ts
    * <rootDir>\.code\branches\code-code-refactor-very-large\tests\__mocks__\src\core\cli.ts

jest-haste-map: Haste module naming collision: codecrucible-synth
  The following files share their name; please adjust your hasteImpl:
    * <rootDir>\package.json
    * <rootDir>\.code\branches\code-claude-refactor-very-large\package.json

jest-haste-map: Haste module naming collision: codecrucible-rust-executor
  The following files share their name; please adjust your hasteImpl:
    * <rootDir>\rust-executor\package.json
    * <rootDir>\.code\branches\code-claude-refactor-very-large\rust-executor\package.json

(node:31656) PromiseRejectionHandledWarning: Promise rejection was handled asynchronously (rejection id: 10)
(Use `node --trace-warnings ...` to show where the warning was created)
(node:12480) PromiseRejectionHandledWarning: Promise rejection was handled asynchronously (rejection id: 10)
(Use `node --trace-warnings ...` to show where the warning was created)
(node:12196) PromiseRejectionHandledWarning: Promise rejection was handled asynchronously (rejection id: 10)
(Use `node --trace-warnings ...` to show where the warning was created)
(node:15848) PromiseRejectionHandledWarning: Promise rejection was handled asynchronously (rejection id: 10)
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/unit/adapters/llm-provider-adapter.test.ts
  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should handle connection failures and track consecutive failures

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 3

    [0m [90m 299 |[39m   }
     [90m 300 |[39m
    [31m[1m>[22m[39m[90m 301 |[39m   setConsecutiveFailures(failures[33m:[39m number)[33m:[39m [36mvoid[39m {
     [90m     |[39m                                                               [31m[1m^[22m[39m
     [90m 302 |[39m     [36mthis[39m[33m.[39mconsecutiveFailures [33m=[39m failures[33m;[39m
     [90m 303 |[39m   }
     [90m 304 |[39m[0m

      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:301:63)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should close provider and cleanup resources

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 335 |[39m   afterEach([36masync[39m () [33m=>[39m {
     [90m 336 |[39m     [36mif[39m (adapter) {
    [31m[1m>[22m[39m[90m 337 |[39m       [36mawait[39m adapter[33m.[39mclose()[33m;[39m
     [90m     |[39m                                                 [31m[1m^[22m[39m
     [90m 338 |[39m     }
     [90m 339 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 340 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:337:49)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle provider operations before initialization

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 594 |[39m       }[33m;[39m
     [90m 595 |[39m
    [31m[1m>[22m[39m[90m 596 |[39m       [36mconst[39m eventHandler [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 597 |[39m       adapter[33m.[39mon([32m'streamingStarted'[39m[33m,[39m eventHandler)[33m;[39m
     [90m 598 |[39m
     [90m 599 |[39m       [36mconst[39m stream [33m=[39m [36mawait[39m adapter[33m.[39mgenerateTextStream([32m'model-1'[39m[33m,[39m request)[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:596:40)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Performance and Concurrency ‚Ä∫ should handle rapid model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:683:31)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Event Emission and Monitoring ‚Ä∫ should emit all lifecycle events

    expect(received).toContain(expected) // indexOf

    Expected value: "closed"
    Received array: ["initialized", "connectionSuccess", "modelLoaded", "textGenerated", "modelUnloaded"]

    [0m [90m 725 |[39m         messages[33m,[39m
     [90m 726 |[39m         maxTokens[33m:[39m [35m200[39m[33m,[39m
    [31m[1m>[22m[39m[90m 727 |[39m         temperature[33m:[39m [35m0.5[39m[33m,[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 728 |[39m       }[33m;[39m
     [90m 729 |[39m
     [90m 730 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m adapter[33m.[39mchatCompletion([32m'model-2'[39m[33m,[39m request)[33m;[39m[0m

      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:727:43)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts
  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should handle connection failures and track consecutive failures

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 3

    [0m [90m 299 |[39m   }
     [90m 300 |[39m
    [31m[1m>[22m[39m[90m 301 |[39m   setConsecutiveFailures(failures[33m:[39m number)[33m:[39m [36mvoid[39m {
     [90m     |[39m                                                               [31m[1m^[22m[39m
     [90m 302 |[39m     [36mthis[39m[33m.[39mconsecutiveFailures [33m=[39m failures[33m;[39m
     [90m 303 |[39m   }
     [90m 304 |[39m[0m

      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:301:63)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should close provider and cleanup resources

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 335 |[39m   afterEach([36masync[39m () [33m=>[39m {
     [90m 336 |[39m     [36mif[39m (adapter) {
    [31m[1m>[22m[39m[90m 337 |[39m       [36mawait[39m adapter[33m.[39mclose()[33m;[39m
     [90m     |[39m                                                 [31m[1m^[22m[39m
     [90m 338 |[39m     }
     [90m 339 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 340 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:337:49)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle provider operations before initialization

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 594 |[39m       }[33m;[39m
     [90m 595 |[39m
    [31m[1m>[22m[39m[90m 596 |[39m       [36mconst[39m eventHandler [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 597 |[39m       adapter[33m.[39mon([32m'streamingStarted'[39m[33m,[39m eventHandler)[33m;[39m
     [90m 598 |[39m
     [90m 599 |[39m       [36mconst[39m stream [33m=[39m [36mawait[39m adapter[33m.[39mgenerateTextStream([32m'model-1'[39m[33m,[39m request)[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:596:40)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Performance and Concurrency ‚Ä∫ should handle rapid model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:683:31)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Event Emission and Monitoring ‚Ä∫ should emit all lifecycle events

    expect(received).toContain(expected) // indexOf

    Expected value: "closed"
    Received array: ["initialized", "connectionSuccess", "modelLoaded", "textGenerated", "modelUnloaded"]

    [0m [90m 725 |[39m         messages[33m,[39m
     [90m 726 |[39m         maxTokens[33m:[39m [35m200[39m[33m,[39m
    [31m[1m>[22m[39m[90m 727 |[39m         temperature[33m:[39m [35m0.5[39m[33m,[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 728 |[39m       }[33m;[39m
     [90m 729 |[39m
     [90m 730 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m adapter[33m.[39mchatCompletion([32m'model-2'[39m[33m,[39m request)[33m;[39m[0m

      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:727:43)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts
  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should handle connection failures and track consecutive failures

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 3

    [0m [90m 299 |[39m   }
     [90m 300 |[39m
    [31m[1m>[22m[39m[90m 301 |[39m   setConsecutiveFailures(failures[33m:[39m number)[33m:[39m [36mvoid[39m {
     [90m     |[39m                                                               [31m[1m^[22m[39m
     [90m 302 |[39m     [36mthis[39m[33m.[39mconsecutiveFailures [33m=[39m failures[33m;[39m
     [90m 303 |[39m   }
     [90m 304 |[39m[0m

      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:301:63)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should close provider and cleanup resources

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 335 |[39m   afterEach([36masync[39m () [33m=>[39m {
     [90m 336 |[39m     [36mif[39m (adapter) {
    [31m[1m>[22m[39m[90m 337 |[39m       [36mawait[39m adapter[33m.[39mclose()[33m;[39m
     [90m     |[39m                                                 [31m[1m^[22m[39m
     [90m 338 |[39m     }
     [90m 339 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 340 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:337:49)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle provider operations before initialization

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 594 |[39m       }[33m;[39m
     [90m 595 |[39m
    [31m[1m>[22m[39m[90m 596 |[39m       [36mconst[39m eventHandler [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 597 |[39m       adapter[33m.[39mon([32m'streamingStarted'[39m[33m,[39m eventHandler)[33m;[39m
     [90m 598 |[39m
     [90m 599 |[39m       [36mconst[39m stream [33m=[39m [36mawait[39m adapter[33m.[39mgenerateTextStream([32m'model-1'[39m[33m,[39m request)[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:596:40)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Performance and Concurrency ‚Ä∫ should handle rapid model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:683:31)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Event Emission and Monitoring ‚Ä∫ should emit all lifecycle events

    expect(received).toContain(expected) // indexOf

    Expected value: "closed"
    Received array: ["initialized", "connectionSuccess", "modelLoaded", "textGenerated", "modelUnloaded"]

    [0m [90m 725 |[39m         messages[33m,[39m
     [90m 726 |[39m         maxTokens[33m:[39m [35m200[39m[33m,[39m
    [31m[1m>[22m[39m[90m 727 |[39m         temperature[33m:[39m [35m0.5[39m[33m,[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 728 |[39m       }[33m;[39m
     [90m 729 |[39m
     [90m 730 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m adapter[33m.[39mchatCompletion([32m'model-2'[39m[33m,[39m request)[33m;[39m[0m

      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:727:43)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts
  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should handle connection failures and track consecutive failures

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 3

    [0m [90m 299 |[39m   }
     [90m 300 |[39m
    [31m[1m>[22m[39m[90m 301 |[39m   setConsecutiveFailures(failures[33m:[39m number)[33m:[39m [36mvoid[39m {
     [90m     |[39m                                                               [31m[1m^[22m[39m
     [90m 302 |[39m     [36mthis[39m[33m.[39mconsecutiveFailures [33m=[39m failures[33m;[39m
     [90m 303 |[39m   }
     [90m 304 |[39m[0m

      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:301:63)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should close provider and cleanup resources

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 335 |[39m   afterEach([36masync[39m () [33m=>[39m {
     [90m 336 |[39m     [36mif[39m (adapter) {
    [31m[1m>[22m[39m[90m 337 |[39m       [36mawait[39m adapter[33m.[39mclose()[33m;[39m
     [90m     |[39m                                                 [31m[1m^[22m[39m
     [90m 338 |[39m     }
     [90m 339 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 340 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:337:49)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle provider operations before initialization

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 594 |[39m       }[33m;[39m
     [90m 595 |[39m
    [31m[1m>[22m[39m[90m 596 |[39m       [36mconst[39m eventHandler [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 597 |[39m       adapter[33m.[39mon([32m'streamingStarted'[39m[33m,[39m eventHandler)[33m;[39m
     [90m 598 |[39m
     [90m 599 |[39m       [36mconst[39m stream [33m=[39m [36mawait[39m adapter[33m.[39mgenerateTextStream([32m'model-1'[39m[33m,[39m request)[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:596:40)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Performance and Concurrency ‚Ä∫ should handle rapid model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:683:31)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Event Emission and Monitoring ‚Ä∫ should emit all lifecycle events

    expect(received).toContain(expected) // indexOf

    Expected value: "closed"
    Received array: ["initialized", "connectionSuccess", "modelLoaded", "textGenerated", "modelUnloaded"]

    [0m [90m 725 |[39m         messages[33m,[39m
     [90m 726 |[39m         maxTokens[33m:[39m [35m200[39m[33m,[39m
    [31m[1m>[22m[39m[90m 727 |[39m         temperature[33m:[39m [35m0.5[39m[33m,[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 728 |[39m       }[33m;[39m
     [90m 729 |[39m
     [90m 730 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m adapter[33m.[39mchatCompletion([32m'model-2'[39m[33m,[39m request)[33m;[39m[0m

      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:727:43)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/agents/agent-communication-protocol.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mAgentCommunicationProtocol[39m[33m,[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 11 |[39m   [33mAgent[39m[33m,[39m
     [90m 12 |[39m   [33mAgentCapability[39m[33m,[39m
     [90m 13 |[39m   [33mAgentTask[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts:10:43)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/quality/reconstructed-code-quality-analyzer.js' from '.code/branches/code-code-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { jest[33m,[39m describe[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m it[33m,[39m expect } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mReconstructedCodeQualityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/reconstructed-code-quality-analyzer.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m { [33mASTComplexityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/ast-complexity-analyzer.js'[39m[33m;[39m
     [90m    |[39m                                                  [31m[1m^[22m[39m
     [90m 10 |[39m [36mimport[39m { [33mAsyncToolIntegrationManager[39m } [36mfrom[39m [32m'../../../src/core/quality/async-tool-integration-manager.js'[39m[33m;[39m
     [90m 11 |[39m
     [90m 12 |[39m describe([32m'ReconstructedCodeQualityAnalyzer'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts:9:50)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/agents/agent-communication-protocol.js' from '.code/branches/code-code-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mAgentCommunicationProtocol[39m[33m,[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 11 |[39m   [33mAgent[39m[33m,[39m
     [90m 12 |[39m   [33mAgentCapability[39m[33m,[39m
     [90m 13 |[39m   [33mAgentTask[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts:10:43)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/quality/reconstructed-code-quality-analyzer.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { jest[33m,[39m describe[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m it[33m,[39m expect } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mReconstructedCodeQualityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/reconstructed-code-quality-analyzer.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m { [33mASTComplexityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/ast-complexity-analyzer.js'[39m[33m;[39m
     [90m    |[39m                                                  [31m[1m^[22m[39m
     [90m 10 |[39m [36mimport[39m { [33mAsyncToolIntegrationManager[39m } [36mfrom[39m [32m'../../../src/core/quality/async-tool-integration-manager.js'[39m[33m;[39m
     [90m 11 |[39m
     [90m 12 |[39m describe([32m'ReconstructedCodeQualityAnalyzer'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts:9:50)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/quality/reconstructed-code-quality-analyzer.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { jest[33m,[39m describe[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m it[33m,[39m expect } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mReconstructedCodeQualityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/reconstructed-code-quality-analyzer.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m { [33mASTComplexityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/ast-complexity-analyzer.js'[39m[33m;[39m
     [90m    |[39m                                                  [31m[1m^[22m[39m
     [90m 10 |[39m [36mimport[39m { [33mAsyncToolIntegrationManager[39m } [36mfrom[39m [32m'../../../src/core/quality/async-tool-integration-manager.js'[39m[33m;[39m
     [90m 11 |[39m
     [90m 12 |[39m describe([32m'ReconstructedCodeQualityAnalyzer'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts:9:50)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/agents/agent-communication-protocol.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mAgentCommunicationProtocol[39m[33m,[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 11 |[39m   [33mAgent[39m[33m,[39m
     [90m 12 |[39m   [33mAgentCapability[39m[33m,[39m
     [90m 13 |[39m   [33mAgentTask[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts:10:43)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/coordinators/simplified-living-spiral-coordinator.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  9 |[39m   [33mSimplifiedLivingSpiralCoordinator[39m[33m,[39m
     [90m    |[39m                                                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mSimplifiedSpiralConfig[39m[33m,[39m
     [90m 11 |[39m   [33mSimplifiedSpiralInput[39m[33m,[39m
     [90m 12 |[39m   [33mSimplifiedSpiralOutput[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts:9:51)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/di/dependency-container.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/di/dependency-container.js' from '.code/branches/code-code-refactor-very-large/tests/unit/core/di/dependency-container.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mDependencyContainer[39m[33m,[39m
     [90m 11 |[39m   [33mDependencyScope[39m[33m,[39m
     [90m 12 |[39m   [33mServiceLifecycle[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/di/dependency-container.test.ts:9:35)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/coordinators/simplified-living-spiral-coordinator.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  9 |[39m   [33mSimplifiedLivingSpiralCoordinator[39m[33m,[39m
     [90m    |[39m                                                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mSimplifiedSpiralConfig[39m[33m,[39m
     [90m 11 |[39m   [33mSimplifiedSpiralInput[39m[33m,[39m
     [90m 12 |[39m   [33mSimplifiedSpiralOutput[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts:9:51)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/di/dependency-container.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/di/dependency-container.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/di/dependency-container.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mDependencyContainer[39m[33m,[39m
     [90m 11 |[39m   [33mDependencyScope[39m[33m,[39m
     [90m 12 |[39m   [33mServiceLifecycle[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/di/dependency-container.test.ts:9:35)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/coordinators/simplified-living-spiral-coordinator.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  9 |[39m   [33mSimplifiedLivingSpiralCoordinator[39m[33m,[39m
     [90m    |[39m                                                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mSimplifiedSpiralConfig[39m[33m,[39m
     [90m 11 |[39m   [33mSimplifiedSpiralInput[39m[33m,[39m
     [90m 12 |[39m   [33mSimplifiedSpiralOutput[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts:9:51)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/di/dependency-container.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/di/dependency-container.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/di/dependency-container.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mDependencyContainer[39m[33m,[39m
     [90m 11 |[39m   [33mDependencyScope[39m[33m,[39m
     [90m 12 |[39m   [33mServiceLifecycle[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/di/dependency-container.test.ts:9:35)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/modern-input-sanitizer.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mModernInputSanitizer[39m[33m,[39m
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 11 |[39m   [33mSanitizationResult[39m[33m,[39m
     [90m 12 |[39m   [33mConsentManager[39m[33m,[39m
     [90m 13 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/modern-input-sanitizer.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts:10:37)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/modern-input-sanitizer.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mModernInputSanitizer[39m[33m,[39m
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 11 |[39m   [33mSanitizationResult[39m[33m,[39m
     [90m 12 |[39m   [33mConsentManager[39m[33m,[39m
     [90m 13 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/modern-input-sanitizer.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts:10:37)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/modern-input-sanitizer.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mModernInputSanitizer[39m[33m,[39m
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 11 |[39m   [33mSanitizationResult[39m[33m,[39m
     [90m 12 |[39m   [33mConsentManager[39m[33m,[39m
     [90m 13 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/modern-input-sanitizer.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts:10:37)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/lm-studio-provider.js' from '.code/branches/code-code-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/lm-studio-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts:8:33)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/lm-studio-provider.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/lm-studio-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts:8:33)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     ‚Ä¢ If you need a custom transformation specify a "transform" option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\Admin\Documents\RST\codecrucible-synth\.code\branches\code-code-refactor-very-large\tests\unit\security\modern-input-sanitizer.test.ts:47
                /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    SyntaxError: Invalid regular expression: /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi: Unterminated group

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     ‚Ä¢ If you need a custom transformation specify a "transform" option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\Admin\Documents\RST\codecrucible-synth\.code\branches\code-gemini-refactor-very-large\tests\unit\security\modern-input-sanitizer.test.ts:47
                /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    SyntaxError: Invalid regular expression: /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi: Unterminated group

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     ‚Ä¢ If you need a custom transformation specify a "transform" option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\Admin\Documents\RST\codecrucible-synth\.code\branches\code-claude-refactor-very-large\tests\unit\security\modern-input-sanitizer.test.ts:47
                /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    SyntaxError: Invalid regular expression: /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi: Unterminated group

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/lm-studio-provider.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/lm-studio-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts:8:33)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/huggingface-provider.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mHuggingFaceProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/huggingface-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts:8:35)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/huggingface-provider.js' from '.code/branches/code-code-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mHuggingFaceProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/huggingface-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts:8:35)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/rbac-policy-engine.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts'

    [0m [90m 14 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m 15 |[39m [36mimport[39m { [33mRBACPolicyEngine[39m } [36mfrom[39m [32m'../../../../src/core/auth/rbac-policy-engine.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 17 |[39m   [33mPolicy[39m[33m,[39m
     [90m 18 |[39m   [33mPolicyContext[39m[33m,[39m
     [90m 19 |[39m   [33mRole[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts:16:33)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/huggingface-provider.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mHuggingFaceProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/huggingface-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts:8:35)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/rbac-policy-engine.js' from '.code/branches/code-code-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts'

    [0m [90m 14 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m 15 |[39m [36mimport[39m { [33mRBACPolicyEngine[39m } [36mfrom[39m [32m'../../../../src/core/auth/rbac-policy-engine.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 17 |[39m   [33mPolicy[39m[33m,[39m
     [90m 18 |[39m   [33mPolicyContext[39m[33m,[39m
     [90m 19 |[39m   [33mRole[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts:16:33)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-provider.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mOllamaProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts:8:30)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/rbac-policy-engine.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts'

    [0m [90m 14 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m 15 |[39m [36mimport[39m { [33mRBACPolicyEngine[39m } [36mfrom[39m [32m'../../../../src/core/auth/rbac-policy-engine.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 17 |[39m   [33mPolicy[39m[33m,[39m
     [90m 18 |[39m   [33mPolicyContext[39m[33m,[39m
     [90m 19 |[39m   [33mRole[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts:16:33)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/lm-studio.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/lm-studio.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts:8:24)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-provider.js' from '.code/branches/code-code-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mOllamaProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts:8:30)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-provider.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mOllamaProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts:8:30)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/lm-studio.js' from '.code/branches/code-code-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/lm-studio.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts:8:24)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/lm-studio.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/lm-studio.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts:8:24)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/jwt-authenticator.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts'

    [0m [90m 17 |[39m [36mimport[39m jwt [36mfrom[39m [32m'jsonwebtoken'[39m[33m;[39m
     [90m 18 |[39m [36mimport[39m crypto [36mfrom[39m [32m'crypto'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 19 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 20 |[39m describe([32m'JWTAuthenticator - Critical Security Tests'[39m[33m,[39m () [33m=>[39m {
     [90m 21 |[39m   [36mlet[39m authenticator[33m:[39m [33mJWTAuthenticator[39m[33m;[39m
     [90m 22 |[39m   [36mlet[39m config[33m:[39m [33mAuthConfig[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts:19:32)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/jwt-authenticator.js' from '.code/branches/code-code-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts'

    [0m [90m 17 |[39m [36mimport[39m jwt [36mfrom[39m [32m'jsonwebtoken'[39m[33m;[39m
     [90m 18 |[39m [36mimport[39m crypto [36mfrom[39m [32m'crypto'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 19 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 20 |[39m describe([32m'JWTAuthenticator - Critical Security Tests'[39m[33m,[39m () [33m=>[39m {
     [90m 21 |[39m   [36mlet[39m authenticator[33m:[39m [33mJWTAuthenticator[39m[33m;[39m
     [90m 22 |[39m   [36mlet[39m config[33m:[39m [33mAuthConfig[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts:19:32)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/jwt-authenticator.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts'

    [0m [90m 17 |[39m [36mimport[39m jwt [36mfrom[39m [32m'jsonwebtoken'[39m[33m;[39m
     [90m 18 |[39m [36mimport[39m crypto [36mfrom[39m [32m'crypto'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 19 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 20 |[39m describe([32m'JWTAuthenticator - Critical Security Tests'[39m[33m,[39m () [33m=>[39m {
     [90m 21 |[39m   [36mlet[39m authenticator[33m:[39m [33mJWTAuthenticator[39m[33m;[39m
     [90m 22 |[39m   [36mlet[39m config[33m:[39m [33mAuthConfig[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts:19:32)

PASS .code/branches/code-code-refactor-very-large/tests/unit/security/security-framework.test.ts
PASS .code/branches/code-gemini-refactor-very-large/tests/unit/security/security-framework.test.ts
PASS .code/branches/code-claude-refactor-very-large/tests/unit/security/security-framework.test.ts
FAIL .code/branches/code-code-refactor-very-large/tests/unit/advanced-synthesis.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/advanced-synthesis-engine' from '.code/branches/code-code-refactor-very-large/tests/unit/advanced-synthesis.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mAdvancedSynthesisEngine[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mSynthesisMode[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 5 |[39m   [33mWeightingStrategy[39m[33m,[39m
     [90m 6 |[39m   [33mConflictResolutionStrategy[39m[33m,[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../src/core/advanced-synthesis-engine'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/advanced-synthesis.test.ts:4:37)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/advanced-synthesis.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/advanced-synthesis-engine' from '.code/branches/code-gemini-refactor-very-large/tests/unit/advanced-synthesis.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mAdvancedSynthesisEngine[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mSynthesisMode[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 5 |[39m   [33mWeightingStrategy[39m[33m,[39m
     [90m 6 |[39m   [33mConflictResolutionStrategy[39m[33m,[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../src/core/advanced-synthesis-engine'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/advanced-synthesis.test.ts:4:37)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/advanced-synthesis.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/advanced-synthesis-engine' from '.code/branches/code-claude-refactor-very-large/tests/unit/advanced-synthesis.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mAdvancedSynthesisEngine[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mSynthesisMode[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 5 |[39m   [33mWeightingStrategy[39m[33m,[39m
     [90m 6 |[39m   [33mConflictResolutionStrategy[39m[33m,[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../src/core/advanced-synthesis-engine'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/advanced-synthesis.test.ts:4:37)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/cycle-detection.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/planning/enhanced-agentic-planner.js' from '.code/branches/code-code-refactor-very-large/tests/unit/core/cycle-detection.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  8 |[39m   [33mEnhancedAgenticPlanner[39m[33m,[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m  9 |[39m   [33mTask[39m[33m,[39m
     [90m 10 |[39m   [33mPlanningContext[39m[33m,[39m
     [90m 11 |[39m } [36mfrom[39m [32m'../../../src/core/planning/enhanced-agentic-planner.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/cycle-detection.test.ts:8:39)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/cycle-detection.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/planning/enhanced-agentic-planner.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/cycle-detection.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  8 |[39m   [33mEnhancedAgenticPlanner[39m[33m,[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m  9 |[39m   [33mTask[39m[33m,[39m
     [90m 10 |[39m   [33mPlanningContext[39m[33m,[39m
     [90m 11 |[39m } [36mfrom[39m [32m'../../../src/core/planning/enhanced-agentic-planner.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/cycle-detection.test.ts:8:39)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/cycle-detection.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/planning/enhanced-agentic-planner.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/cycle-detection.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  8 |[39m   [33mEnhancedAgenticPlanner[39m[33m,[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m  9 |[39m   [33mTask[39m[33m,[39m
     [90m 10 |[39m   [33mPlanningContext[39m[33m,[39m
     [90m 11 |[39m } [36mfrom[39m [32m'../../../src/core/planning/enhanced-agentic-planner.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/cycle-detection.test.ts:8:39)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/types.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from '.code/branches/code-code-refactor-very-large/tests/unit/core/types.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/types.test.ts:7:24)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/types.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/types.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/types.test.ts:7:24)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/types.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/types.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/types.test.ts:7:24)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/living-spiral.test.ts
  ‚óè Test suite failed to run

    Cannot find module './voice-system-coordinator.js' from '.code/branches/code-code-refactor-very-large/src/voices/voice-archetype-system.ts'

    Require stack:
      .code/branches/code-code-refactor-very-large/src/voices/voice-archetype-system.ts
      .code/branches/code-code-refactor-very-large/tests/unit/living-spiral.test.ts

    [0m [90m 2 |[39m   [33mVoiceSystemCoordinator[39m[33m,[39m
     [90m 3 |[39m   [33mVoiceArchetypeSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mCouncilMode[39m[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m } [36mfrom[39m [32m'./voice-system-coordinator.js'[39m[33m;[39m
     [90m 6 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/src/voices/voice-archetype-system.ts:4:37)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/living-spiral.test.ts:5:34)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/living-spiral.test.ts
  ‚óè Test suite failed to run

    Cannot find module './voice-system-coordinator.js' from '.code/branches/code-gemini-refactor-very-large/src/voices/voice-archetype-system.ts'

    Require stack:
      .code/branches/code-gemini-refactor-very-large/src/voices/voice-archetype-system.ts
      .code/branches/code-gemini-refactor-very-large/tests/unit/living-spiral.test.ts

    [0m [90m 2 |[39m   [33mVoiceSystemCoordinator[39m[33m,[39m
     [90m 3 |[39m   [33mVoiceArchetypeSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mCouncilMode[39m[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m } [36mfrom[39m [32m'./voice-system-coordinator.js'[39m[33m;[39m
     [90m 6 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/src/voices/voice-archetype-system.ts:4:37)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/living-spiral.test.ts:5:34)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/living-spiral.test.ts
  ‚óè Test suite failed to run

    Cannot find module './voice-system-coordinator.js' from '.code/branches/code-claude-refactor-very-large/src/voices/voice-archetype-system.ts'

    Require stack:
      .code/branches/code-claude-refactor-very-large/src/voices/voice-archetype-system.ts
      .code/branches/code-claude-refactor-very-large/tests/unit/living-spiral.test.ts

    [0m [90m 2 |[39m   [33mVoiceSystemCoordinator[39m[33m,[39m
     [90m 3 |[39m   [33mVoiceArchetypeSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mCouncilMode[39m[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m } [36mfrom[39m [32m'./voice-system-coordinator.js'[39m[33m;[39m
     [90m 6 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/src/voices/voice-archetype-system.ts:4:37)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/living-spiral.test.ts:5:34)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from '.code/branches/code-code-refactor-very-large/tests/unit/core/logger.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m[33m,[39m logger } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m [36mimport[39m { existsSync[33m,[39m unlinkSync[33m,[39m readFileSync } [36mfrom[39m [32m'fs'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m { homedir } [36mfrom[39m [32m'os'[39m[33m;[39m
     [90m 10 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/logger.test.ts:7:18)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/logger.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m[33m,[39m logger } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m [36mimport[39m { existsSync[33m,[39m unlinkSync[33m,[39m readFileSync } [36mfrom[39m [32m'fs'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m { homedir } [36mfrom[39m [32m'os'[39m[33m;[39m
     [90m 10 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/logger.test.ts:7:18)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/logger.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m[33m,[39m logger } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m [36mimport[39m { existsSync[33m,[39m unlinkSync[33m,[39m readFileSync } [36mfrom[39m [32m'fs'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m { homedir } [36mfrom[39m [32m'os'[39m[33m;[39m
     [90m 10 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/logger.test.ts:7:18)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/response-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/response-types' from '.code/branches/code-code-refactor-very-large/tests/unit/response-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mResponseFactory[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mResponseValidator[39m[33m,[39m
     [90m   |[39m                          [31m[1m^[22m[39m
     [90m 5 |[39m   [33mAgentResponse[39m[33m,[39m
     [90m 6 |[39m   [33mSynthesisResponse[39m[33m,[39m
     [90m 7 |[39m   [33mToolResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/response-system.test.ts:4:26)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/response-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/response-types' from '.code/branches/code-gemini-refactor-very-large/tests/unit/response-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mResponseFactory[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mResponseValidator[39m[33m,[39m
     [90m   |[39m                          [31m[1m^[22m[39m
     [90m 5 |[39m   [33mAgentResponse[39m[33m,[39m
     [90m 6 |[39m   [33mSynthesisResponse[39m[33m,[39m
     [90m 7 |[39m   [33mToolResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/response-system.test.ts:4:26)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/response-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/response-types' from '.code/branches/code-claude-refactor-very-large/tests/unit/response-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mResponseFactory[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mResponseValidator[39m[33m,[39m
     [90m   |[39m                          [31m[1m^[22m[39m
     [90m 5 |[39m   [33mAgentResponse[39m[33m,[39m
     [90m 6 |[39m   [33mSynthesisResponse[39m[33m,[39m
     [90m 7 |[39m   [33mToolResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/response-system.test.ts:4:26)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/logger-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from '.code/branches/code-code-refactor-very-large/tests/unit/core/logger-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m describe([32m'Logger Enterprise System'[39m[33m,[39m () [33m=>[39m {
     [90m 10 |[39m   [36mlet[39m testLogger[33m:[39m [33mLogger[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/logger-simple.test.ts:7:18)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/logger-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/logger-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m describe([32m'Logger Enterprise System'[39m[33m,[39m () [33m=>[39m {
     [90m 10 |[39m   [36mlet[39m testLogger[33m:[39m [33mLogger[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/logger-simple.test.ts:7:18)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/logger-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/logger-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m describe([32m'Logger Enterprise System'[39m[33m,[39m () [33m=>[39m {
     [90m 10 |[39m   [36mlet[39m testLogger[33m:[39m [33mLogger[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/logger-simple.test.ts:7:18)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/types-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from '.code/branches/code-code-refactor-very-large/tests/unit/core/types-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/types-simple.test.ts:7:24)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/types-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/types-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/types-simple.test.ts:7:24)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/types-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/types-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/types-simple.test.ts:7:24)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/rust/rust-provider-client.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRustProviderClient[39m } [36mfrom[39m [32m'../../../../src/infrastructure/rust/rust-provider-client.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RustProviderClient'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m   [36mlet[39m client[33m:[39m [33mRustProviderClient[39m[33m;[39m
     [90m 6 |[39m   [36mlet[39m getRustModule[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m
     [90m 7 |[39m   [36mlet[39m isHealthy[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts:4:35)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/rust/rust-provider-client.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRustProviderClient[39m } [36mfrom[39m [32m'../../../../src/infrastructure/rust/rust-provider-client.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RustProviderClient'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m   [36mlet[39m client[33m:[39m [33mRustProviderClient[39m[33m;[39m
     [90m 6 |[39m   [36mlet[39m getRustModule[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m
     [90m 7 |[39m   [36mlet[39m isHealthy[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts:4:35)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/rust/rust-provider-client.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRustProviderClient[39m } [36mfrom[39m [32m'../../../../src/infrastructure/rust/rust-provider-client.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RustProviderClient'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m   [36mlet[39m client[33m:[39m [33mRustProviderClient[39m[33m;[39m
     [90m 6 |[39m   [36mlet[39m getRustModule[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m
     [90m 7 |[39m   [36mlet[39m isHealthy[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts:4:35)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/cache/unified-cache-system.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mUnifiedCacheSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   defaultUnifiedCacheConfig[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/cache/unified-cache-system.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'UnifiedCacheSystem embeddings'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts:3:35)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/cache/unified-cache-system.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mUnifiedCacheSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   defaultUnifiedCacheConfig[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/cache/unified-cache-system.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'UnifiedCacheSystem embeddings'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts:3:35)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/cache/unified-cache-system.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mUnifiedCacheSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   defaultUnifiedCacheConfig[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/cache/unified-cache-system.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'UnifiedCacheSystem embeddings'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts:3:35)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/observability/observability-system.ts' from '.code/branches/code-code-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mSynthesisCoordinator[39m } [36mfrom[39m [32m'../../../src/core/application/synthesis-coordinator.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { [33mDependencyContainer[39m } [36mfrom[39m [32m'../../../src/core/di/dependency-container.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m {
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mCLIENT_TOKEN[39m[33m,[39m
     [90m 5 |[39m   [33mCACHE_COORDINATOR_TOKEN[39m[33m,[39m
     [90m 6 |[39m   [33mSECURITY_VALIDATOR_TOKEN[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts:3:6)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/observability/observability-system.ts' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mSynthesisCoordinator[39m } [36mfrom[39m [32m'../../../src/core/application/synthesis-coordinator.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { [33mDependencyContainer[39m } [36mfrom[39m [32m'../../../src/core/di/dependency-container.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m {
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mCLIENT_TOKEN[39m[33m,[39m
     [90m 5 |[39m   [33mCACHE_COORDINATOR_TOKEN[39m[33m,[39m
     [90m 6 |[39m   [33mSECURITY_VALIDATOR_TOKEN[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts:3:6)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/observability/observability-system.ts' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mSynthesisCoordinator[39m } [36mfrom[39m [32m'../../../src/core/application/synthesis-coordinator.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { [33mDependencyContainer[39m } [36mfrom[39m [32m'../../../src/core/di/dependency-container.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m {
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mCLIENT_TOKEN[39m[33m,[39m
     [90m 5 |[39m   [33mCACHE_COORDINATOR_TOKEN[39m[33m,[39m
     [90m 6 |[39m   [33mSECURITY_VALIDATOR_TOKEN[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts:3:6)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/input-sanitizer.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mInputSanitizer[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/input-sanitizer.js'[39m[33m;[39m
     [90m 3 |[39m [36mimport[39m { [33mSecurityPolicyLoader[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-policy-loader.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 4 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 5 |[39m describe([32m'InputSanitizer initialization'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m   beforeEach(() [33m=>[39m {
     [90m 7 |[39m     ([33mInputSanitizer[39m [36mas[39m any)[33m.[39mallowedCommands [33m=[39m [36mnull[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts:4:30)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/input-sanitizer.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mInputSanitizer[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/input-sanitizer.js'[39m[33m;[39m
     [90m 3 |[39m [36mimport[39m { [33mSecurityPolicyLoader[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-policy-loader.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 4 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 5 |[39m describe([32m'InputSanitizer initialization'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m   beforeEach(() [33m=>[39m {
     [90m 7 |[39m     ([33mInputSanitizer[39m [36mas[39m any)[33m.[39mallowedCommands [33m=[39m [36mnull[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts:4:30)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/input-sanitizer.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mInputSanitizer[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/input-sanitizer.js'[39m[33m;[39m
     [90m 3 |[39m [36mimport[39m { [33mSecurityPolicyLoader[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-policy-loader.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 4 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 5 |[39m describe([32m'InputSanitizer initialization'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m   beforeEach(() [33m=>[39m {
     [90m 7 |[39m     ([33mInputSanitizer[39m [36mas[39m any)[33m.[39mallowedCommands [33m=[39m [36mnull[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts:4:30)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/domain/tools/unified-file-tool.js' from '.code/branches/code-code-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mUnifiedFileTool[39m } [36mfrom[39m [32m'../../../src/domain/tools/unified-file-tool.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { [33mToolExecutionContext[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/tool-system.js'[39m[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m [36mlet[39m rootDir[33m:[39m string[33m;[39m
     [90m 10 |[39m [36mlet[39m outsideFile[33m:[39m string[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts:7:32)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/domain/tools/unified-file-tool.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mUnifiedFileTool[39m } [36mfrom[39m [32m'../../../src/domain/tools/unified-file-tool.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { [33mToolExecutionContext[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/tool-system.js'[39m[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m [36mlet[39m rootDir[33m:[39m string[33m;[39m
     [90m 10 |[39m [36mlet[39m outsideFile[33m:[39m string[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts:7:32)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/domain/tools/unified-file-tool.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mUnifiedFileTool[39m } [36mfrom[39m [32m'../../../src/domain/tools/unified-file-tool.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { [33mToolExecutionContext[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/tool-system.js'[39m[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m [36mlet[39m rootDir[33m:[39m string[33m;[39m
     [90m 10 |[39m [36mlet[39m outsideFile[33m:[39m string[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts:7:32)

PASS .code/branches/code-code-refactor-very-large/tests/unit/core/workflow-orchestrator-types.test.ts
PASS .code/branches/code-gemini-refactor-very-large/tests/unit/core/workflow-orchestrator-types.test.ts
PASS .code/branches/code-claude-refactor-very-large/tests/unit/core/workflow-orchestrator-types.test.ts
FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/rate-limiter.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRateLimiter[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/rate-limiter.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RateLimiter timer cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                           [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts:4:27)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/rate-limiter.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRateLimiter[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/rate-limiter.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RateLimiter timer cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                           [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts:4:27)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/rate-limiter.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRateLimiter[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/rate-limiter.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RateLimiter timer cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                           [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts:4:27)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/utils/version.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/utils/version.js' from '.code/branches/code-code-refactor-very-large/tests/unit/utils/version.test.ts'

    [0m [90m 36 |[39m     )[33m;[39m
     [90m 37 |[39m   })[33m;[39m
    [31m[1m>[22m[39m[90m 38 |[39m })[33m;[39m
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 39 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/utils/version.test.ts:38:22)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/utils/version.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/utils/version.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/utils/version.test.ts'

    [0m [90m 36 |[39m     )[33m;[39m
     [90m 37 |[39m   })[33m;[39m
    [31m[1m>[22m[39m[90m 38 |[39m })[33m;[39m
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 39 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/utils/version.test.ts:38:22)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/utils/version.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/utils/version.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/utils/version.test.ts'

    [0m [90m 36 |[39m     )[33m;[39m
     [90m 37 |[39m   })[33m;[39m
    [31m[1m>[22m[39m[90m 38 |[39m })[33m;[39m
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 39 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/utils/version.test.ts:38:22)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/services/service-factory.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mServiceFactory[39m } [36mfrom[39m [32m'../../../src/application/services/service-factory.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mILogger[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/logger.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ServiceFactory disposal'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   [36mfunction[39m createTestLogger()[33m:[39m [33mILogger[39m {
     [90m 6 |[39m     [36mreturn[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts:3:30)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/services/service-factory.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mServiceFactory[39m } [36mfrom[39m [32m'../../../src/application/services/service-factory.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mILogger[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/logger.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ServiceFactory disposal'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   [36mfunction[39m createTestLogger()[33m:[39m [33mILogger[39m {
     [90m 6 |[39m     [36mreturn[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts:3:30)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/services/service-factory.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mServiceFactory[39m } [36mfrom[39m [32m'../../../src/application/services/service-factory.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mILogger[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/logger.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ServiceFactory disposal'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   [36mfunction[39m createTestLogger()[33m:[39m [33mILogger[39m {
     [90m 6 |[39m     [36mreturn[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts:3:30)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/context/context-window-manager.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mContextWindowManager[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   [33mFileAnalysisResult[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../src/application/context/context-window-manager.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'ContextWindowManager semantic chunking'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts:3:37)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/context/context-window-manager.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mContextWindowManager[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   [33mFileAnalysisResult[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../src/application/context/context-window-manager.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'ContextWindowManager semantic chunking'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts:3:37)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/context/context-window-manager.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mContextWindowManager[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   [33mFileAnalysisResult[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../src/application/context/context-window-manager.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'ContextWindowManager semantic chunking'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts:3:37)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/tool-execution-router.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mToolExecutionRouter[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/tool-execution-router.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mIMcpManager[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/mcp-manager.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m type { [33mWorkflowRequest[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/workflow-orchestrator.js'[39m[33m;[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 4 |[39m [36mimport[39m type {
     [90m 5 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 6 |[39m   [33mModelResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts:3:36)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/tool-execution-router.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mToolExecutionRouter[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/tool-execution-router.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mIMcpManager[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/mcp-manager.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m type { [33mWorkflowRequest[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/workflow-orchestrator.js'[39m[33m;[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 4 |[39m [36mimport[39m type {
     [90m 5 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 6 |[39m   [33mModelResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts:3:36)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/tool-execution-router.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mToolExecutionRouter[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/tool-execution-router.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mIMcpManager[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/mcp-manager.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m type { [33mWorkflowRequest[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/workflow-orchestrator.js'[39m[33m;[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 4 |[39m [36mimport[39m type {
     [90m 5 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 6 |[39m   [33mModelResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts:3:36)

FAIL tests/unit/application/orchestrator/tool-execution-router.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/tool-execution-router.js' from 'tests/unit/application/orchestrator/tool-execution-router.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mToolExecutionRouter[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/tool-execution-router.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mIMcpManager[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/mcp-manager.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m type { [33mWorkflowRequest[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/workflow-orchestrator.js'[39m[33m;[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 4 |[39m [36mimport[39m type {
     [90m 5 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 6 |[39m   [33mModelResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/orchestrator/tool-execution-router.test.ts:3:36)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/streaming-handler.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mStreamingManager[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/streaming-manager.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type {
    [31m[1m>[22m[39m[90m 3 |[39m   [33mIModelClient[39m[33m,[39m
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 5 |[39m   [33mModelResponse[39m[33m,[39m
     [90m 6 |[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/model-client.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts:3:6)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/streaming-handler.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mStreamingManager[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/streaming-manager.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type {
    [31m[1m>[22m[39m[90m 3 |[39m   [33mIModelClient[39m[33m,[39m
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 5 |[39m   [33mModelResponse[39m[33m,[39m
     [90m 6 |[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/model-client.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts:3:6)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/streaming-handler.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mStreamingManager[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/streaming-manager.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type {
    [31m[1m>[22m[39m[90m 3 |[39m   [33mIModelClient[39m[33m,[39m
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 5 |[39m   [33mModelResponse[39m[33m,[39m
     [90m 6 |[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/model-client.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts:3:6)

FAIL tests/unit/application/orchestrator/streaming-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/streaming-handler.js' from 'tests/unit/application/orchestrator/streaming-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mStreamingManager[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/streaming-manager.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type {
    [31m[1m>[22m[39m[90m 3 |[39m   [33mIModelClient[39m[33m,[39m
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 5 |[39m   [33mModelResponse[39m[33m,[39m
     [90m 6 |[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/model-client.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/orchestrator/streaming-manager.test.ts:3:6)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/tools/enhanced-tool-integration.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mEnhancedToolIntegration[39m } [36mfrom[39m [32m'../../../../src/infrastructure/tools/enhanced-tool-integration.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'EnhancedToolIntegration cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts:4:40)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/tools/enhanced-tool-integration.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mEnhancedToolIntegration[39m } [36mfrom[39m [32m'../../../../src/infrastructure/tools/enhanced-tool-integration.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'EnhancedToolIntegration cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts:4:40)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/tools/enhanced-tool-integration.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mEnhancedToolIntegration[39m } [36mfrom[39m [32m'../../../../src/infrastructure/tools/enhanced-tool-integration.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'EnhancedToolIntegration cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts:4:40)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/security-audit-logger.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts'

    [0m [90m 4 |[39m [36mimport[39m {
     [90m 5 |[39m   [33mSecurityAuditLogger[39m[33m,[39m
    [31m[1m>[22m[39m[90m 6 |[39m   [33mAuditOutcome[39m[33m,[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-audit-logger.js'[39m[33m;[39m
     [90m 8 |[39m
     [90m 9 |[39m describe([32m'SecurityAuditLogger'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts:6:36)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/security-audit-logger.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts'

    [0m [90m 4 |[39m [36mimport[39m {
     [90m 5 |[39m   [33mSecurityAuditLogger[39m[33m,[39m
    [31m[1m>[22m[39m[90m 6 |[39m   [33mAuditOutcome[39m[33m,[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-audit-logger.js'[39m[33m;[39m
     [90m 8 |[39m
     [90m 9 |[39m describe([32m'SecurityAuditLogger'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts:6:36)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/security-audit-logger.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts'

    [0m [90m 4 |[39m [36mimport[39m {
     [90m 5 |[39m   [33mSecurityAuditLogger[39m[33m,[39m
    [31m[1m>[22m[39m[90m 6 |[39m   [33mAuditOutcome[39m[33m,[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-audit-logger.js'[39m[33m;[39m
     [90m 8 |[39m
     [90m 9 |[39m describe([32m'SecurityAuditLogger'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts:6:36)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/providers/ollama-utils.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-config.js' from '.code/branches/code-code-refactor-very-large/tests/unit/providers/ollama-utils.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { parseEnvInt[33m,[39m [33mOllamaToolCall[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-config.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { extractToolCalls } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-tool-processor.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ollama utils'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   test([32m'parseEnvInt respects bounds'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m     process[33m.[39menv[33m.[39m[33mTEST_INT[39m [33m=[39m [32m'50'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/providers/ollama-utils.test.ts:3:28)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/providers/ollama-utils.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-config.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/providers/ollama-utils.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { parseEnvInt[33m,[39m [33mOllamaToolCall[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-config.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { extractToolCalls } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-tool-processor.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ollama utils'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   test([32m'parseEnvInt respects bounds'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m     process[33m.[39menv[33m.[39m[33mTEST_INT[39m [33m=[39m [32m'50'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/providers/ollama-utils.test.ts:3:28)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/providers/ollama-utils.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-config.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/providers/ollama-utils.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { parseEnvInt[33m,[39m [33mOllamaToolCall[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-config.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { extractToolCalls } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-tool-processor.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ollama utils'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   test([32m'parseEnvInt respects bounds'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m     process[33m.[39menv[33m.[39m[33mTEST_INT[39m [33m=[39m [32m'50'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/providers/ollama-utils.test.ts:3:28)

FAIL tests/unit/providers/ollama-utils.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-config.js' from 'tests/unit/providers/ollama-utils.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { parseEnvInt[33m,[39m [33mOllamaToolCall[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-config.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { extractToolCalls } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-tool-processor.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ollama utils'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   test([32m'parseEnvInt respects bounds'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m     process[33m.[39menv[33m.[39m[33mTEST_INT[39m [33m=[39m [32m'50'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/providers/ollama-utils.test.ts:3:28)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/intelligence/lazy-project-intelligence.js' from '.code/branches/code-code-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mLazyProjectIntelligenceSystem[39m } [36mfrom[39m [32m'../../../../src/core/intelligence/lazy-project-intelligence.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'LazyProjectIntelligenceSystem cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts:4:40)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/intelligence/lazy-project-intelligence.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mLazyProjectIntelligenceSystem[39m } [36mfrom[39m [32m'../../../../src/core/intelligence/lazy-project-intelligence.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'LazyProjectIntelligenceSystem cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts:4:40)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/intelligence/lazy-project-intelligence.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mLazyProjectIntelligenceSystem[39m } [36mfrom[39m [32m'../../../../src/core/intelligence/lazy-project-intelligence.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'LazyProjectIntelligenceSystem cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts:4:40)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/cli/analysis-worker-pool.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mAnalysisWorkerPool[39m } [36mfrom[39m [32m'../../../src/application/cli/analysis-worker-pool.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'AnalysisWorkerPool'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'processes tasks concurrently'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m pool [33m=[39m [36mnew[39m [33mAnalysisWorkerPool[39m([35m2[39m)[33m;[39m
     [90m 6 |[39m     [36mconst[39m start [33m=[39m [33mDate[39m[33m.[39mnow()[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts:3:35)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/cli/analysis-worker-pool.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mAnalysisWorkerPool[39m } [36mfrom[39m [32m'../../../src/application/cli/analysis-worker-pool.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'AnalysisWorkerPool'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'processes tasks concurrently'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m pool [33m=[39m [36mnew[39m [33mAnalysisWorkerPool[39m([35m2[39m)[33m;[39m
     [90m 6 |[39m     [36mconst[39m start [33m=[39m [33mDate[39m[33m.[39mnow()[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts:3:35)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/cli/analysis-worker-pool.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mAnalysisWorkerPool[39m } [36mfrom[39m [32m'../../../src/application/cli/analysis-worker-pool.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'AnalysisWorkerPool'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'processes tasks concurrently'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m pool [33m=[39m [36mnew[39m [33mAnalysisWorkerPool[39m([35m2[39m)[33m;[39m
     [90m 6 |[39m     [36mconst[39m start [33m=[39m [33mDate[39m[33m.[39mnow()[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts:3:35)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/provider-capability-registry.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProviderCapabilityRegistry[39m } [36mfrom[39m [32m'../../../../src/application/services/provider-capability-registry.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProviderCapabilityRegistry'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                           [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'registers and checks capabilities'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m registry [33m=[39m [36mnew[39m [33mProviderCapabilityRegistry[39m()[33m;[39m
     [90m 6 |[39m     registry[33m.[39mregister([32m'test'[39m[33m,[39m { streaming[33m:[39m [36mtrue[39m[33m,[39m toolCalling[33m:[39m [36mfalse[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts:3:43)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/provider-capability-registry.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProviderCapabilityRegistry[39m } [36mfrom[39m [32m'../../../../src/application/services/provider-capability-registry.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProviderCapabilityRegistry'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                           [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'registers and checks capabilities'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m registry [33m=[39m [36mnew[39m [33mProviderCapabilityRegistry[39m()[33m;[39m
     [90m 6 |[39m     registry[33m.[39mregister([32m'test'[39m[33m,[39m { streaming[33m:[39m [36mtrue[39m[33m,[39m toolCalling[33m:[39m [36mfalse[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts:3:43)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/provider-capability-registry.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProviderCapabilityRegistry[39m } [36mfrom[39m [32m'../../../../src/application/services/provider-capability-registry.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProviderCapabilityRegistry'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                           [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'registers and checks capabilities'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m registry [33m=[39m [36mnew[39m [33mProviderCapabilityRegistry[39m()[33m;[39m
     [90m 6 |[39m     registry[33m.[39mregister([32m'test'[39m[33m,[39m { streaming[33m:[39m [36mtrue[39m[33m,[39m toolCalling[33m:[39m [36mfalse[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts:3:43)

FAIL tests/unit/application/orchestrator/provider-capability-registry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/provider-capability-registry.js' from 'tests/unit/application/orchestrator/provider-capability-registry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProviderCapabilityRegistry[39m } [36mfrom[39m [32m'../../../../src/application/services/provider-capability-registry.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProviderCapabilityRegistry'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                           [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'registers and checks capabilities'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m registry [33m=[39m [36mnew[39m [33mProviderCapabilityRegistry[39m()[33m;[39m
     [90m 6 |[39m     registry[33m.[39mregister([32m'test'[39m[33m,[39m { streaming[33m:[39m [36mtrue[39m[33m,[39m toolCalling[33m:[39m [36mfalse[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/orchestrator/provider-capability-registry.test.ts:3:43)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/production-rbac-system.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProductionRBACSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/production-rbac-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProductionRBACSystem cache cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m rbac [33m=[39m [36mnew[39m [33mProductionRBACSystem[39m({} [36mas[39m any[33m,[39m {} [36mas[39m any)[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts:3:37)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/production-rbac-system.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProductionRBACSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/production-rbac-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProductionRBACSystem cache cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m rbac [33m=[39m [36mnew[39m [33mProductionRBACSystem[39m({} [36mas[39m any[33m,[39m {} [36mas[39m any)[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts:3:37)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/production-rbac-system.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProductionRBACSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/production-rbac-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProductionRBACSystem cache cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m rbac [33m=[39m [36mnew[39m [33mProductionRBACSystem[39m({} [36mas[39m any[33m,[39m {} [36mas[39m any)[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts:3:37)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/monitoring/user-warning-system.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mUserWarningSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/monitoring/user-warning-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'UserWarningSystem long-running warnings'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                  [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m system [33m=[39m [36mnew[39m [33mUserWarningSystem[39m({ longRunningWarningInterval[33m:[39m [35m1000[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts:3:34)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/monitoring/user-warning-system.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mUserWarningSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/monitoring/user-warning-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'UserWarningSystem long-running warnings'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                  [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m system [33m=[39m [36mnew[39m [33mUserWarningSystem[39m({ longRunningWarningInterval[33m:[39m [35m1000[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts:3:34)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/monitoring/user-warning-system.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mUserWarningSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/monitoring/user-warning-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'UserWarningSystem long-running warnings'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                  [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m system [33m=[39m [36mnew[39m [33mUserWarningSystem[39m({ longRunningWarningInterval[33m:[39m [35m1000[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts:3:34)

PASS tests/unit/typescript-strict-mode.test.ts (43.702 s)
PASS tests/unit/core/workflow-orchestrator-types.test.ts
PASS tests/unit/security/security-framework.test.ts
FAIL tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/tools/enhanced-tool-integration.js' from 'tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mEnhancedToolIntegration[39m } [36mfrom[39m [32m'../../../../src/infrastructure/tools/enhanced-tool-integration.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'EnhancedToolIntegration cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts:4:40)

FAIL tests/unit/infrastructure/security/security-audit-logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/security-audit-logger.js' from 'tests/unit/infrastructure/security/security-audit-logger.test.ts'

    [0m [90m 4 |[39m [36mimport[39m {
     [90m 5 |[39m   [33mSecurityAuditLogger[39m[33m,[39m
    [31m[1m>[22m[39m[90m 6 |[39m   [33mAuditOutcome[39m[33m,[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-audit-logger.js'[39m[33m;[39m
     [90m 8 |[39m
     [90m 9 |[39m describe([32m'SecurityAuditLogger'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/security/security-audit-logger.test.ts:6:36)

FAIL tests/unit/infrastructure/security/rate-limiter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/rate-limiter.js' from 'tests/unit/infrastructure/security/rate-limiter.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRateLimiter[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/rate-limiter.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RateLimiter timer cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                           [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/security/rate-limiter.test.ts:4:27)

FAIL tests/unit/infrastructure/security/production-rbac-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/production-rbac-system.js' from 'tests/unit/infrastructure/security/production-rbac-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProductionRBACSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/production-rbac-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProductionRBACSystem cache cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m rbac [33m=[39m [36mnew[39m [33mProductionRBACSystem[39m({} [36mas[39m any[33m,[39m {} [36mas[39m any)[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/security/production-rbac-system.test.ts:3:37)

FAIL tests/unit/infrastructure/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/modern-input-sanitizer.js' from 'tests/unit/infrastructure/security/modern-input-sanitizer.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mModernInputSanitizer[39m[33m,[39m
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 11 |[39m   [33mSanitizationResult[39m[33m,[39m
     [90m 12 |[39m   [33mConsentManager[39m[33m,[39m
     [90m 13 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/modern-input-sanitizer.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/security/modern-input-sanitizer.test.ts:10:37)

FAIL tests/unit/infrastructure/security/input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/input-sanitizer.js' from 'tests/unit/infrastructure/security/input-sanitizer.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mInputSanitizer[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/input-sanitizer.js'[39m[33m;[39m
     [90m 3 |[39m [36mimport[39m { [33mSecurityPolicyLoader[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-policy-loader.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 4 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 5 |[39m describe([32m'InputSanitizer initialization'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m   beforeEach(() [33m=>[39m {
     [90m 7 |[39m     ([33mInputSanitizer[39m [36mas[39m any)[33m.[39mallowedCommands [33m=[39m [36mnull[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/security/input-sanitizer.test.ts:4:30)

FAIL tests/unit/infrastructure/monitoring/user-warning-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/monitoring/user-warning-system.js' from 'tests/unit/infrastructure/monitoring/user-warning-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mUserWarningSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/monitoring/user-warning-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'UserWarningSystem long-running warnings'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                  [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m system [33m=[39m [36mnew[39m [33mUserWarningSystem[39m({ longRunningWarningInterval[33m:[39m [35m1000[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/monitoring/user-warning-system.test.ts:3:34)

FAIL tests/unit/infrastructure/cache/unified-cache-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/cache/unified-cache-system.js' from 'tests/unit/infrastructure/cache/unified-cache-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mUnifiedCacheSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   defaultUnifiedCacheConfig[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/cache/unified-cache-system.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'UnifiedCacheSystem embeddings'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/cache/unified-cache-system.test.ts:3:35)

FAIL tests/unit/infrastructure/rust/rust-provider-client.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/rust/rust-provider-client.js' from 'tests/unit/infrastructure/rust/rust-provider-client.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRustProviderClient[39m } [36mfrom[39m [32m'../../../../src/infrastructure/rust/rust-provider-client.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RustProviderClient'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m   [36mlet[39m client[33m:[39m [33mRustProviderClient[39m[33m;[39m
     [90m 6 |[39m   [36mlet[39m getRustModule[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m
     [90m 7 |[39m   [36mlet[39m isHealthy[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/rust/rust-provider-client.test.ts:4:35)

FAIL tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/intelligence/lazy-project-intelligence.js' from 'tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mLazyProjectIntelligenceSystem[39m } [36mfrom[39m [32m'../../../../src/core/intelligence/lazy-project-intelligence.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'LazyProjectIntelligenceSystem cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts:4:40)

FAIL tests/unit/core/di/dependency-container.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/di/dependency-container.js' from 'tests/unit/core/di/dependency-container.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mDependencyContainer[39m[33m,[39m
     [90m 11 |[39m   [33mDependencyScope[39m[33m,[39m
     [90m 12 |[39m   [33mServiceLifecycle[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/di/dependency-container.test.ts:9:35)

FAIL tests/unit/core/auth/rbac-policy-engine.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/rbac-policy-engine.js' from 'tests/unit/core/auth/rbac-policy-engine.test.ts'

    [0m [90m 14 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m 15 |[39m [36mimport[39m { [33mRBACPolicyEngine[39m } [36mfrom[39m [32m'../../../../src/core/auth/rbac-policy-engine.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 17 |[39m   [33mPolicy[39m[33m,[39m
     [90m 18 |[39m   [33mPolicyContext[39m[33m,[39m
     [90m 19 |[39m   [33mRole[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/auth/rbac-policy-engine.test.ts:16:33)

FAIL tests/unit/core/auth/jwt-authenticator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/jwt-authenticator.js' from 'tests/unit/core/auth/jwt-authenticator.test.ts'

    [0m [90m 17 |[39m [36mimport[39m jwt [36mfrom[39m [32m'jsonwebtoken'[39m[33m;[39m
     [90m 18 |[39m [36mimport[39m crypto [36mfrom[39m [32m'crypto'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 19 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 20 |[39m describe([32m'JWTAuthenticator - Critical Security Tests'[39m[33m,[39m () [33m=>[39m {
     [90m 21 |[39m   [36mlet[39m authenticator[33m:[39m [33mJWTAuthenticator[39m[33m;[39m
     [90m 22 |[39m   [36mlet[39m config[33m:[39m [33mAuthConfig[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/auth/jwt-authenticator.test.ts:19:32)

FAIL tests/unit/core/agents/agent-communication-protocol.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/agents/agent-communication-protocol.js' from 'tests/unit/core/agents/agent-communication-protocol.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mAgentCommunicationProtocol[39m[33m,[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 11 |[39m   [33mAgent[39m[33m,[39m
     [90m 12 |[39m   [33mAgentCapability[39m[33m,[39m
     [90m 13 |[39m   [33mAgentTask[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/agents/agent-communication-protocol.test.ts:10:43)

FAIL tests/unit/application/context/context-window-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/context/context-window-manager.js' from 'tests/unit/application/context/context-window-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mContextWindowManager[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   [33mFileAnalysisResult[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../src/application/context/context-window-manager.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'ContextWindowManager semantic chunking'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/context/context-window-manager.test.ts:3:37)

FAIL tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/coordinators/simplified-living-spiral-coordinator.js' from 'tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  9 |[39m   [33mSimplifiedLivingSpiralCoordinator[39m[33m,[39m
     [90m    |[39m                                                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mSimplifiedSpiralConfig[39m[33m,[39m
     [90m 11 |[39m   [33mSimplifiedSpiralInput[39m[33m,[39m
     [90m 12 |[39m   [33mSimplifiedSpiralOutput[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts:9:51)

FAIL tests/unit/application/cli/analysis-worker-pool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/cli/analysis-worker-pool.js' from 'tests/unit/application/cli/analysis-worker-pool.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mAnalysisWorkerPool[39m } [36mfrom[39m [32m'../../../src/application/cli/analysis-worker-pool.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'AnalysisWorkerPool'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'processes tasks concurrently'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m pool [33m=[39m [36mnew[39m [33mAnalysisWorkerPool[39m([35m2[39m)[33m;[39m
     [90m 6 |[39m     [36mconst[39m start [33m=[39m [33mDate[39m[33m.[39mnow()[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/cli/analysis-worker-pool.test.ts:3:35)

FAIL tests/unit/utils/version.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/utils/version.js' from 'tests/unit/utils/version.test.ts'

    [0m [90m 36 |[39m     )[33m;[39m
     [90m 37 |[39m   })[33m;[39m
    [31m[1m>[22m[39m[90m 38 |[39m })[33m;[39m
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 39 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/utils/version.test.ts:38:22)

FAIL tests/unit/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     ‚Ä¢ If you need a custom transformation specify a "transform" option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\Admin\Documents\RST\codecrucible-synth\tests\unit\security\modern-input-sanitizer.test.ts:47
                /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    SyntaxError: Invalid regular expression: /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi: Unterminated group

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)

FAIL tests/unit/providers/ollama-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-provider.js' from 'tests/unit/providers/ollama-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mOllamaProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/providers/ollama-provider-adapter.test.ts:8:30)

FAIL tests/unit/providers/lm-studio-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/lm-studio-provider.js' from 'tests/unit/providers/lm-studio-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/lm-studio-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/providers/lm-studio-provider-adapter.test.ts:8:33)

FAIL tests/unit/providers/lm-studio-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/lm-studio.js' from 'tests/unit/providers/lm-studio-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/lm-studio.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/providers/lm-studio-adapter.test.ts:8:24)

FAIL tests/unit/providers/huggingface-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/huggingface-provider.js' from 'tests/unit/providers/huggingface-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mHuggingFaceProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/huggingface-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/providers/huggingface-provider-adapter.test.ts:8:35)

FAIL tests/unit/quality/reconstructed-code-quality-analyzer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/quality/reconstructed-code-quality-analyzer.js' from 'tests/unit/quality/reconstructed-code-quality-analyzer.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { jest[33m,[39m describe[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m it[33m,[39m expect } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mReconstructedCodeQualityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/reconstructed-code-quality-analyzer.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m { [33mASTComplexityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/ast-complexity-analyzer.js'[39m[33m;[39m
     [90m    |[39m                                                  [31m[1m^[22m[39m
     [90m 10 |[39m [36mimport[39m { [33mAsyncToolIntegrationManager[39m } [36mfrom[39m [32m'../../../src/core/quality/async-tool-integration-manager.js'[39m[33m;[39m
     [90m 11 |[39m
     [90m 12 |[39m describe([32m'ReconstructedCodeQualityAnalyzer'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/quality/reconstructed-code-quality-analyzer.test.ts:9:50)

FAIL tests/unit/domain/unified-file-tool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/domain/tools/unified-file-tool.js' from 'tests/unit/domain/unified-file-tool.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mUnifiedFileTool[39m } [36mfrom[39m [32m'../../../src/domain/tools/unified-file-tool.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { [33mToolExecutionContext[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/tool-system.js'[39m[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m [36mlet[39m rootDir[33m:[39m string[33m;[39m
     [90m 10 |[39m [36mlet[39m outsideFile[33m:[39m string[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/domain/unified-file-tool.test.ts:7:32)

FAIL tests/unit/core/types.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from 'tests/unit/core/types.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/types.test.ts:7:24)

FAIL tests/unit/core/types-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from 'tests/unit/core/types-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/types-simple.test.ts:7:24)

FAIL tests/unit/core/logger-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from 'tests/unit/core/logger-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m describe([32m'Logger Enterprise System'[39m[33m,[39m () [33m=>[39m {
     [90m 10 |[39m   [36mlet[39m testLogger[33m:[39m [33mLogger[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/logger-simple.test.ts:7:18)

FAIL tests/unit/core/logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from 'tests/unit/core/logger.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m[33m,[39m logger } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m [36mimport[39m { existsSync[33m,[39m unlinkSync[33m,[39m readFileSync } [36mfrom[39m [32m'fs'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m { homedir } [36mfrom[39m [32m'os'[39m[33m;[39m
     [90m 10 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/logger.test.ts:7:18)

FAIL tests/unit/core/cycle-detection.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/planning/enhanced-agentic-planner.js' from 'tests/unit/core/cycle-detection.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  8 |[39m   [33mEnhancedAgenticPlanner[39m[33m,[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m  9 |[39m   [33mTask[39m[33m,[39m
     [90m 10 |[39m   [33mPlanningContext[39m[33m,[39m
     [90m 11 |[39m } [36mfrom[39m [32m'../../../src/core/planning/enhanced-agentic-planner.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/cycle-detection.test.ts:8:39)

FAIL tests/unit/application/synthesis-coordinator-telemetry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/observability/observability-system.ts' from 'tests/unit/application/synthesis-coordinator-telemetry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mSynthesisCoordinator[39m } [36mfrom[39m [32m'../../../src/core/application/synthesis-coordinator.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { [33mDependencyContainer[39m } [36mfrom[39m [32m'../../../src/core/di/dependency-container.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m {
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mCLIENT_TOKEN[39m[33m,[39m
     [90m 5 |[39m   [33mCACHE_COORDINATOR_TOKEN[39m[33m,[39m
     [90m 6 |[39m   [33mSECURITY_VALIDATOR_TOKEN[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/synthesis-coordinator-telemetry.test.ts:3:6)

FAIL tests/unit/application/service-factory-disposal.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/services/service-factory.js' from 'tests/unit/application/service-factory-disposal.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mServiceFactory[39m } [36mfrom[39m [32m'../../../src/application/services/service-factory.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mILogger[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/logger.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ServiceFactory disposal'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   [36mfunction[39m createTestLogger()[33m:[39m [33mILogger[39m {
     [90m 6 |[39m     [36mreturn[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/service-factory-disposal.test.ts:3:30)

FAIL tests/unit/response-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/response-types' from 'tests/unit/response-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mResponseFactory[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mResponseValidator[39m[33m,[39m
     [90m   |[39m                          [31m[1m^[22m[39m
     [90m 5 |[39m   [33mAgentResponse[39m[33m,[39m
     [90m 6 |[39m   [33mSynthesisResponse[39m[33m,[39m
     [90m 7 |[39m   [33mToolResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/response-system.test.ts:4:26)

FAIL tests/unit/living-spiral.test.ts
  ‚óè Test suite failed to run

    Cannot find module './voice-system-coordinator.js' from 'src/voices/voice-archetype-system.ts'

    Require stack:
      src/voices/voice-archetype-system.ts
      tests/unit/living-spiral.test.ts

    [0m [90m 2 |[39m   [33mVoiceSystemCoordinator[39m[33m,[39m
     [90m 3 |[39m   [33mVoiceArchetypeSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mCouncilMode[39m[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m } [36mfrom[39m [32m'./voice-system-coordinator.js'[39m[33m;[39m
     [90m 6 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/voices/voice-archetype-system.ts:4:37)
      at Object.<anonymous> (tests/unit/living-spiral.test.ts:5:34)

FAIL tests/unit/advanced-synthesis.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/advanced-synthesis-engine' from 'tests/unit/advanced-synthesis.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mAdvancedSynthesisEngine[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mSynthesisMode[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 5 |[39m   [33mWeightingStrategy[39m[33m,[39m
     [90m 6 |[39m   [33mConflictResolutionStrategy[39m[33m,[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../src/core/advanced-synthesis-engine'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/advanced-synthesis.test.ts:4:37)

PASS .code/branches/code-code-refactor-very-large/tests/unit/typescript-strict-mode.test.ts (58.11 s)
PASS .code/branches/code-gemini-refactor-very-large/tests/unit/typescript-strict-mode.test.ts (58.129 s)
PASS .code/branches/code-claude-refactor-very-large/tests/unit/typescript-strict-mode.test.ts (59.278 s)

Summary of all failing tests
FAIL tests/unit/adapters/llm-provider-adapter.test.ts
  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should handle connection failures and track consecutive failures

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 3

    [0m [90m 299 |[39m   }
     [90m 300 |[39m
    [31m[1m>[22m[39m[90m 301 |[39m   setConsecutiveFailures(failures[33m:[39m number)[33m:[39m [36mvoid[39m {
     [90m     |[39m                                                               [31m[1m^[22m[39m
     [90m 302 |[39m     [36mthis[39m[33m.[39mconsecutiveFailures [33m=[39m failures[33m;[39m
     [90m 303 |[39m   }
     [90m 304 |[39m[0m

      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:301:63)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should close provider and cleanup resources

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 335 |[39m   afterEach([36masync[39m () [33m=>[39m {
     [90m 336 |[39m     [36mif[39m (adapter) {
    [31m[1m>[22m[39m[90m 337 |[39m       [36mawait[39m adapter[33m.[39mclose()[33m;[39m
     [90m     |[39m                                                 [31m[1m^[22m[39m
     [90m 338 |[39m     }
     [90m 339 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 340 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:337:49)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle provider operations before initialization

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 594 |[39m       }[33m;[39m
     [90m 595 |[39m
    [31m[1m>[22m[39m[90m 596 |[39m       [36mconst[39m eventHandler [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 597 |[39m       adapter[33m.[39mon([32m'streamingStarted'[39m[33m,[39m eventHandler)[33m;[39m
     [90m 598 |[39m
     [90m 599 |[39m       [36mconst[39m stream [33m=[39m [36mawait[39m adapter[33m.[39mgenerateTextStream([32m'model-1'[39m[33m,[39m request)[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:596:40)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Performance and Concurrency ‚Ä∫ should handle rapid model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:683:31)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Event Emission and Monitoring ‚Ä∫ should emit all lifecycle events

    expect(received).toContain(expected) // indexOf

    Expected value: "closed"
    Received array: ["initialized", "connectionSuccess", "modelLoaded", "textGenerated", "modelUnloaded"]

    [0m [90m 725 |[39m         messages[33m,[39m
     [90m 726 |[39m         maxTokens[33m:[39m [35m200[39m[33m,[39m
    [31m[1m>[22m[39m[90m 727 |[39m         temperature[33m:[39m [35m0.5[39m[33m,[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 728 |[39m       }[33m;[39m
     [90m 729 |[39m
     [90m 730 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m adapter[33m.[39mchatCompletion([32m'model-2'[39m[33m,[39m request)[33m;[39m[0m

      at Object.<anonymous> (tests/unit/adapters/llm-provider-adapter.test.ts:727:43)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts
  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should handle connection failures and track consecutive failures

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 3

    [0m [90m 299 |[39m   }
     [90m 300 |[39m
    [31m[1m>[22m[39m[90m 301 |[39m   setConsecutiveFailures(failures[33m:[39m number)[33m:[39m [36mvoid[39m {
     [90m     |[39m                                                               [31m[1m^[22m[39m
     [90m 302 |[39m     [36mthis[39m[33m.[39mconsecutiveFailures [33m=[39m failures[33m;[39m
     [90m 303 |[39m   }
     [90m 304 |[39m[0m

      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:301:63)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should close provider and cleanup resources

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 335 |[39m   afterEach([36masync[39m () [33m=>[39m {
     [90m 336 |[39m     [36mif[39m (adapter) {
    [31m[1m>[22m[39m[90m 337 |[39m       [36mawait[39m adapter[33m.[39mclose()[33m;[39m
     [90m     |[39m                                                 [31m[1m^[22m[39m
     [90m 338 |[39m     }
     [90m 339 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 340 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:337:49)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle provider operations before initialization

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 594 |[39m       }[33m;[39m
     [90m 595 |[39m
    [31m[1m>[22m[39m[90m 596 |[39m       [36mconst[39m eventHandler [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 597 |[39m       adapter[33m.[39mon([32m'streamingStarted'[39m[33m,[39m eventHandler)[33m;[39m
     [90m 598 |[39m
     [90m 599 |[39m       [36mconst[39m stream [33m=[39m [36mawait[39m adapter[33m.[39mgenerateTextStream([32m'model-1'[39m[33m,[39m request)[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:596:40)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Performance and Concurrency ‚Ä∫ should handle rapid model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:683:31)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Event Emission and Monitoring ‚Ä∫ should emit all lifecycle events

    expect(received).toContain(expected) // indexOf

    Expected value: "closed"
    Received array: ["initialized", "connectionSuccess", "modelLoaded", "textGenerated", "modelUnloaded"]

    [0m [90m 725 |[39m         messages[33m,[39m
     [90m 726 |[39m         maxTokens[33m:[39m [35m200[39m[33m,[39m
    [31m[1m>[22m[39m[90m 727 |[39m         temperature[33m:[39m [35m0.5[39m[33m,[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 728 |[39m       }[33m;[39m
     [90m 729 |[39m
     [90m 730 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m adapter[33m.[39mchatCompletion([32m'model-2'[39m[33m,[39m request)[33m;[39m[0m

      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:727:43)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts
  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should handle connection failures and track consecutive failures

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 3

    [0m [90m 299 |[39m   }
     [90m 300 |[39m
    [31m[1m>[22m[39m[90m 301 |[39m   setConsecutiveFailures(failures[33m:[39m number)[33m:[39m [36mvoid[39m {
     [90m     |[39m                                                               [31m[1m^[22m[39m
     [90m 302 |[39m     [36mthis[39m[33m.[39mconsecutiveFailures [33m=[39m failures[33m;[39m
     [90m 303 |[39m   }
     [90m 304 |[39m[0m

      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:301:63)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should close provider and cleanup resources

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 335 |[39m   afterEach([36masync[39m () [33m=>[39m {
     [90m 336 |[39m     [36mif[39m (adapter) {
    [31m[1m>[22m[39m[90m 337 |[39m       [36mawait[39m adapter[33m.[39mclose()[33m;[39m
     [90m     |[39m                                                 [31m[1m^[22m[39m
     [90m 338 |[39m     }
     [90m 339 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 340 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:337:49)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle provider operations before initialization

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 594 |[39m       }[33m;[39m
     [90m 595 |[39m
    [31m[1m>[22m[39m[90m 596 |[39m       [36mconst[39m eventHandler [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 597 |[39m       adapter[33m.[39mon([32m'streamingStarted'[39m[33m,[39m eventHandler)[33m;[39m
     [90m 598 |[39m
     [90m 599 |[39m       [36mconst[39m stream [33m=[39m [36mawait[39m adapter[33m.[39mgenerateTextStream([32m'model-1'[39m[33m,[39m request)[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:596:40)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Performance and Concurrency ‚Ä∫ should handle rapid model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:683:31)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Event Emission and Monitoring ‚Ä∫ should emit all lifecycle events

    expect(received).toContain(expected) // indexOf

    Expected value: "closed"
    Received array: ["initialized", "connectionSuccess", "modelLoaded", "textGenerated", "modelUnloaded"]

    [0m [90m 725 |[39m         messages[33m,[39m
     [90m 726 |[39m         maxTokens[33m:[39m [35m200[39m[33m,[39m
    [31m[1m>[22m[39m[90m 727 |[39m         temperature[33m:[39m [35m0.5[39m[33m,[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 728 |[39m       }[33m;[39m
     [90m 729 |[39m
     [90m 730 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m adapter[33m.[39mchatCompletion([32m'model-2'[39m[33m,[39m request)[33m;[39m[0m

      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:727:43)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts
  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should handle connection failures and track consecutive failures

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 3

    [0m [90m 299 |[39m   }
     [90m 300 |[39m
    [31m[1m>[22m[39m[90m 301 |[39m   setConsecutiveFailures(failures[33m:[39m number)[33m:[39m [36mvoid[39m {
     [90m     |[39m                                                               [31m[1m^[22m[39m
     [90m 302 |[39m     [36mthis[39m[33m.[39mconsecutiveFailures [33m=[39m failures[33m;[39m
     [90m 303 |[39m   }
     [90m 304 |[39m[0m

      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:301:63)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Provider Lifecycle Management ‚Ä∫ should close provider and cleanup resources

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 335 |[39m   afterEach([36masync[39m () [33m=>[39m {
     [90m 336 |[39m     [36mif[39m (adapter) {
    [31m[1m>[22m[39m[90m 337 |[39m       [36mawait[39m adapter[33m.[39mclose()[33m;[39m
     [90m     |[39m                                                 [31m[1m^[22m[39m
     [90m 338 |[39m     }
     [90m 339 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 340 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:337:49)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle provider operations before initialization

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 594 |[39m       }[33m;[39m
     [90m 595 |[39m
    [31m[1m>[22m[39m[90m 596 |[39m       [36mconst[39m eventHandler [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 597 |[39m       adapter[33m.[39mon([32m'streamingStarted'[39m[33m,[39m eventHandler)[33m;[39m
     [90m 598 |[39m
     [90m 599 |[39m       [36mconst[39m stream [33m=[39m [36mawait[39m adapter[33m.[39mgenerateTextStream([32m'model-1'[39m[33m,[39m request)[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:596:40)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Error Handling and Edge Cases ‚Ä∫ should handle concurrent model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:604:43)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Performance and Concurrency ‚Ä∫ should handle rapid model loading and unloading

    Model already loaded: model-1

    [0m [90m 127 |[39m     [90m// Different models have different capabilities[39m
     [90m 128 |[39m     [36mconst[39m capabilities[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m [33mLLMProviderCapabilities[39m[33m>[39m [33m=[39m {
    [31m[1m>[22m[39m[90m 129 |[39m       [32m'model-1'[39m[33m:[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 130 |[39m         textGeneration[33m:[39m [36mtrue[39m[33m,[39m
     [90m 131 |[39m         chatCompletion[33m:[39m [36mtrue[39m[33m,[39m
     [90m 132 |[39m         streamingSupport[33m:[39m [36mtrue[39m[33m,[39m[0m

      at MockLLMProviderAdapter.loadModel (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:129:19)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:683:31)

  ‚óè LLM Provider Adapter - Comprehensive Tests ‚Ä∫ Event Emission and Monitoring ‚Ä∫ should emit all lifecycle events

    expect(received).toContain(expected) // indexOf

    Expected value: "closed"
    Received array: ["initialized", "connectionSuccess", "modelLoaded", "textGenerated", "modelUnloaded"]

    [0m [90m 725 |[39m         messages[33m,[39m
     [90m 726 |[39m         maxTokens[33m:[39m [35m200[39m[33m,[39m
    [31m[1m>[22m[39m[90m 727 |[39m         temperature[33m:[39m [35m0.5[39m[33m,[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 728 |[39m       }[33m;[39m
     [90m 729 |[39m
     [90m 730 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m adapter[33m.[39mchatCompletion([32m'model-2'[39m[33m,[39m request)[33m;[39m[0m

      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/adapters/llm-provider-adapter.test.ts:727:43)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/agents/agent-communication-protocol.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mAgentCommunicationProtocol[39m[33m,[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 11 |[39m   [33mAgent[39m[33m,[39m
     [90m 12 |[39m   [33mAgentCapability[39m[33m,[39m
     [90m 13 |[39m   [33mAgentTask[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts:10:43)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/quality/reconstructed-code-quality-analyzer.js' from '.code/branches/code-code-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { jest[33m,[39m describe[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m it[33m,[39m expect } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mReconstructedCodeQualityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/reconstructed-code-quality-analyzer.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m { [33mASTComplexityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/ast-complexity-analyzer.js'[39m[33m;[39m
     [90m    |[39m                                                  [31m[1m^[22m[39m
     [90m 10 |[39m [36mimport[39m { [33mAsyncToolIntegrationManager[39m } [36mfrom[39m [32m'../../../src/core/quality/async-tool-integration-manager.js'[39m[33m;[39m
     [90m 11 |[39m
     [90m 12 |[39m describe([32m'ReconstructedCodeQualityAnalyzer'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts:9:50)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/agents/agent-communication-protocol.js' from '.code/branches/code-code-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mAgentCommunicationProtocol[39m[33m,[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 11 |[39m   [33mAgent[39m[33m,[39m
     [90m 12 |[39m   [33mAgentCapability[39m[33m,[39m
     [90m 13 |[39m   [33mAgentTask[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts:10:43)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/quality/reconstructed-code-quality-analyzer.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { jest[33m,[39m describe[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m it[33m,[39m expect } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mReconstructedCodeQualityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/reconstructed-code-quality-analyzer.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m { [33mASTComplexityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/ast-complexity-analyzer.js'[39m[33m;[39m
     [90m    |[39m                                                  [31m[1m^[22m[39m
     [90m 10 |[39m [36mimport[39m { [33mAsyncToolIntegrationManager[39m } [36mfrom[39m [32m'../../../src/core/quality/async-tool-integration-manager.js'[39m[33m;[39m
     [90m 11 |[39m
     [90m 12 |[39m describe([32m'ReconstructedCodeQualityAnalyzer'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts:9:50)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/quality/reconstructed-code-quality-analyzer.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { jest[33m,[39m describe[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m it[33m,[39m expect } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mReconstructedCodeQualityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/reconstructed-code-quality-analyzer.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m { [33mASTComplexityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/ast-complexity-analyzer.js'[39m[33m;[39m
     [90m    |[39m                                                  [31m[1m^[22m[39m
     [90m 10 |[39m [36mimport[39m { [33mAsyncToolIntegrationManager[39m } [36mfrom[39m [32m'../../../src/core/quality/async-tool-integration-manager.js'[39m[33m;[39m
     [90m 11 |[39m
     [90m 12 |[39m describe([32m'ReconstructedCodeQualityAnalyzer'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/quality/reconstructed-code-quality-analyzer.test.ts:9:50)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/agents/agent-communication-protocol.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mAgentCommunicationProtocol[39m[33m,[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 11 |[39m   [33mAgent[39m[33m,[39m
     [90m 12 |[39m   [33mAgentCapability[39m[33m,[39m
     [90m 13 |[39m   [33mAgentTask[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/agents/agent-communication-protocol.test.ts:10:43)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/coordinators/simplified-living-spiral-coordinator.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  9 |[39m   [33mSimplifiedLivingSpiralCoordinator[39m[33m,[39m
     [90m    |[39m                                                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mSimplifiedSpiralConfig[39m[33m,[39m
     [90m 11 |[39m   [33mSimplifiedSpiralInput[39m[33m,[39m
     [90m 12 |[39m   [33mSimplifiedSpiralOutput[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts:9:51)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/di/dependency-container.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/di/dependency-container.js' from '.code/branches/code-code-refactor-very-large/tests/unit/core/di/dependency-container.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mDependencyContainer[39m[33m,[39m
     [90m 11 |[39m   [33mDependencyScope[39m[33m,[39m
     [90m 12 |[39m   [33mServiceLifecycle[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/di/dependency-container.test.ts:9:35)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/coordinators/simplified-living-spiral-coordinator.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  9 |[39m   [33mSimplifiedLivingSpiralCoordinator[39m[33m,[39m
     [90m    |[39m                                                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mSimplifiedSpiralConfig[39m[33m,[39m
     [90m 11 |[39m   [33mSimplifiedSpiralInput[39m[33m,[39m
     [90m 12 |[39m   [33mSimplifiedSpiralOutput[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts:9:51)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/di/dependency-container.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/di/dependency-container.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/di/dependency-container.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mDependencyContainer[39m[33m,[39m
     [90m 11 |[39m   [33mDependencyScope[39m[33m,[39m
     [90m 12 |[39m   [33mServiceLifecycle[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/di/dependency-container.test.ts:9:35)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/coordinators/simplified-living-spiral-coordinator.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  9 |[39m   [33mSimplifiedLivingSpiralCoordinator[39m[33m,[39m
     [90m    |[39m                                                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mSimplifiedSpiralConfig[39m[33m,[39m
     [90m 11 |[39m   [33mSimplifiedSpiralInput[39m[33m,[39m
     [90m 12 |[39m   [33mSimplifiedSpiralOutput[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts:9:51)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/di/dependency-container.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/di/dependency-container.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/di/dependency-container.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mDependencyContainer[39m[33m,[39m
     [90m 11 |[39m   [33mDependencyScope[39m[33m,[39m
     [90m 12 |[39m   [33mServiceLifecycle[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/di/dependency-container.test.ts:9:35)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/modern-input-sanitizer.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mModernInputSanitizer[39m[33m,[39m
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 11 |[39m   [33mSanitizationResult[39m[33m,[39m
     [90m 12 |[39m   [33mConsentManager[39m[33m,[39m
     [90m 13 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/modern-input-sanitizer.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts:10:37)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/modern-input-sanitizer.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mModernInputSanitizer[39m[33m,[39m
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 11 |[39m   [33mSanitizationResult[39m[33m,[39m
     [90m 12 |[39m   [33mConsentManager[39m[33m,[39m
     [90m 13 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/modern-input-sanitizer.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts:10:37)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/modern-input-sanitizer.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mModernInputSanitizer[39m[33m,[39m
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 11 |[39m   [33mSanitizationResult[39m[33m,[39m
     [90m 12 |[39m   [33mConsentManager[39m[33m,[39m
     [90m 13 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/modern-input-sanitizer.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/modern-input-sanitizer.test.ts:10:37)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/lm-studio-provider.js' from '.code/branches/code-code-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/lm-studio-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts:8:33)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/lm-studio-provider.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/lm-studio-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts:8:33)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     ‚Ä¢ If you need a custom transformation specify a "transform" option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\Admin\Documents\RST\codecrucible-synth\.code\branches\code-code-refactor-very-large\tests\unit\security\modern-input-sanitizer.test.ts:47
                /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    SyntaxError: Invalid regular expression: /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi: Unterminated group

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     ‚Ä¢ If you need a custom transformation specify a "transform" option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\Admin\Documents\RST\codecrucible-synth\.code\branches\code-gemini-refactor-very-large\tests\unit\security\modern-input-sanitizer.test.ts:47
                /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    SyntaxError: Invalid regular expression: /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi: Unterminated group

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     ‚Ä¢ If you need a custom transformation specify a "transform" option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\Admin\Documents\RST\codecrucible-synth\.code\branches\code-claude-refactor-very-large\tests\unit\security\modern-input-sanitizer.test.ts:47
                /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    SyntaxError: Invalid regular expression: /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi: Unterminated group

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/lm-studio-provider.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/lm-studio-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/providers/lm-studio-provider-adapter.test.ts:8:33)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/huggingface-provider.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mHuggingFaceProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/huggingface-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts:8:35)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/huggingface-provider.js' from '.code/branches/code-code-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mHuggingFaceProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/huggingface-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts:8:35)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/rbac-policy-engine.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts'

    [0m [90m 14 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m 15 |[39m [36mimport[39m { [33mRBACPolicyEngine[39m } [36mfrom[39m [32m'../../../../src/core/auth/rbac-policy-engine.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 17 |[39m   [33mPolicy[39m[33m,[39m
     [90m 18 |[39m   [33mPolicyContext[39m[33m,[39m
     [90m 19 |[39m   [33mRole[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts:16:33)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/huggingface-provider.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mHuggingFaceProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/huggingface-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/providers/huggingface-provider-adapter.test.ts:8:35)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/rbac-policy-engine.js' from '.code/branches/code-code-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts'

    [0m [90m 14 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m 15 |[39m [36mimport[39m { [33mRBACPolicyEngine[39m } [36mfrom[39m [32m'../../../../src/core/auth/rbac-policy-engine.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 17 |[39m   [33mPolicy[39m[33m,[39m
     [90m 18 |[39m   [33mPolicyContext[39m[33m,[39m
     [90m 19 |[39m   [33mRole[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts:16:33)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-provider.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mOllamaProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts:8:30)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/rbac-policy-engine.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts'

    [0m [90m 14 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m 15 |[39m [36mimport[39m { [33mRBACPolicyEngine[39m } [36mfrom[39m [32m'../../../../src/core/auth/rbac-policy-engine.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 17 |[39m   [33mPolicy[39m[33m,[39m
     [90m 18 |[39m   [33mPolicyContext[39m[33m,[39m
     [90m 19 |[39m   [33mRole[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/auth/rbac-policy-engine.test.ts:16:33)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/lm-studio.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/lm-studio.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts:8:24)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-provider.js' from '.code/branches/code-code-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mOllamaProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts:8:30)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-provider.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mOllamaProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/providers/ollama-provider-adapter.test.ts:8:30)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/lm-studio.js' from '.code/branches/code-code-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/lm-studio.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts:8:24)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/lm-studio.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/lm-studio.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/providers/lm-studio-adapter.test.ts:8:24)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/jwt-authenticator.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts'

    [0m [90m 17 |[39m [36mimport[39m jwt [36mfrom[39m [32m'jsonwebtoken'[39m[33m;[39m
     [90m 18 |[39m [36mimport[39m crypto [36mfrom[39m [32m'crypto'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 19 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 20 |[39m describe([32m'JWTAuthenticator - Critical Security Tests'[39m[33m,[39m () [33m=>[39m {
     [90m 21 |[39m   [36mlet[39m authenticator[33m:[39m [33mJWTAuthenticator[39m[33m;[39m
     [90m 22 |[39m   [36mlet[39m config[33m:[39m [33mAuthConfig[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts:19:32)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/jwt-authenticator.js' from '.code/branches/code-code-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts'

    [0m [90m 17 |[39m [36mimport[39m jwt [36mfrom[39m [32m'jsonwebtoken'[39m[33m;[39m
     [90m 18 |[39m [36mimport[39m crypto [36mfrom[39m [32m'crypto'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 19 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 20 |[39m describe([32m'JWTAuthenticator - Critical Security Tests'[39m[33m,[39m () [33m=>[39m {
     [90m 21 |[39m   [36mlet[39m authenticator[33m:[39m [33mJWTAuthenticator[39m[33m;[39m
     [90m 22 |[39m   [36mlet[39m config[33m:[39m [33mAuthConfig[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts:19:32)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/jwt-authenticator.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts'

    [0m [90m 17 |[39m [36mimport[39m jwt [36mfrom[39m [32m'jsonwebtoken'[39m[33m;[39m
     [90m 18 |[39m [36mimport[39m crypto [36mfrom[39m [32m'crypto'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 19 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 20 |[39m describe([32m'JWTAuthenticator - Critical Security Tests'[39m[33m,[39m () [33m=>[39m {
     [90m 21 |[39m   [36mlet[39m authenticator[33m:[39m [33mJWTAuthenticator[39m[33m;[39m
     [90m 22 |[39m   [36mlet[39m config[33m:[39m [33mAuthConfig[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/auth/jwt-authenticator.test.ts:19:32)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/advanced-synthesis.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/advanced-synthesis-engine' from '.code/branches/code-code-refactor-very-large/tests/unit/advanced-synthesis.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mAdvancedSynthesisEngine[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mSynthesisMode[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 5 |[39m   [33mWeightingStrategy[39m[33m,[39m
     [90m 6 |[39m   [33mConflictResolutionStrategy[39m[33m,[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../src/core/advanced-synthesis-engine'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/advanced-synthesis.test.ts:4:37)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/advanced-synthesis.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/advanced-synthesis-engine' from '.code/branches/code-gemini-refactor-very-large/tests/unit/advanced-synthesis.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mAdvancedSynthesisEngine[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mSynthesisMode[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 5 |[39m   [33mWeightingStrategy[39m[33m,[39m
     [90m 6 |[39m   [33mConflictResolutionStrategy[39m[33m,[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../src/core/advanced-synthesis-engine'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/advanced-synthesis.test.ts:4:37)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/advanced-synthesis.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/advanced-synthesis-engine' from '.code/branches/code-claude-refactor-very-large/tests/unit/advanced-synthesis.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mAdvancedSynthesisEngine[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mSynthesisMode[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 5 |[39m   [33mWeightingStrategy[39m[33m,[39m
     [90m 6 |[39m   [33mConflictResolutionStrategy[39m[33m,[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../src/core/advanced-synthesis-engine'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/advanced-synthesis.test.ts:4:37)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/cycle-detection.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/planning/enhanced-agentic-planner.js' from '.code/branches/code-code-refactor-very-large/tests/unit/core/cycle-detection.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  8 |[39m   [33mEnhancedAgenticPlanner[39m[33m,[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m  9 |[39m   [33mTask[39m[33m,[39m
     [90m 10 |[39m   [33mPlanningContext[39m[33m,[39m
     [90m 11 |[39m } [36mfrom[39m [32m'../../../src/core/planning/enhanced-agentic-planner.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/cycle-detection.test.ts:8:39)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/cycle-detection.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/planning/enhanced-agentic-planner.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/cycle-detection.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  8 |[39m   [33mEnhancedAgenticPlanner[39m[33m,[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m  9 |[39m   [33mTask[39m[33m,[39m
     [90m 10 |[39m   [33mPlanningContext[39m[33m,[39m
     [90m 11 |[39m } [36mfrom[39m [32m'../../../src/core/planning/enhanced-agentic-planner.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/cycle-detection.test.ts:8:39)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/cycle-detection.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/planning/enhanced-agentic-planner.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/cycle-detection.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  8 |[39m   [33mEnhancedAgenticPlanner[39m[33m,[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m  9 |[39m   [33mTask[39m[33m,[39m
     [90m 10 |[39m   [33mPlanningContext[39m[33m,[39m
     [90m 11 |[39m } [36mfrom[39m [32m'../../../src/core/planning/enhanced-agentic-planner.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/cycle-detection.test.ts:8:39)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/types.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from '.code/branches/code-code-refactor-very-large/tests/unit/core/types.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/types.test.ts:7:24)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/types.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/types.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/types.test.ts:7:24)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/types.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/types.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/types.test.ts:7:24)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/living-spiral.test.ts
  ‚óè Test suite failed to run

    Cannot find module './voice-system-coordinator.js' from '.code/branches/code-code-refactor-very-large/src/voices/voice-archetype-system.ts'

    Require stack:
      .code/branches/code-code-refactor-very-large/src/voices/voice-archetype-system.ts
      .code/branches/code-code-refactor-very-large/tests/unit/living-spiral.test.ts

    [0m [90m 2 |[39m   [33mVoiceSystemCoordinator[39m[33m,[39m
     [90m 3 |[39m   [33mVoiceArchetypeSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mCouncilMode[39m[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m } [36mfrom[39m [32m'./voice-system-coordinator.js'[39m[33m;[39m
     [90m 6 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/src/voices/voice-archetype-system.ts:4:37)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/living-spiral.test.ts:5:34)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/living-spiral.test.ts
  ‚óè Test suite failed to run

    Cannot find module './voice-system-coordinator.js' from '.code/branches/code-gemini-refactor-very-large/src/voices/voice-archetype-system.ts'

    Require stack:
      .code/branches/code-gemini-refactor-very-large/src/voices/voice-archetype-system.ts
      .code/branches/code-gemini-refactor-very-large/tests/unit/living-spiral.test.ts

    [0m [90m 2 |[39m   [33mVoiceSystemCoordinator[39m[33m,[39m
     [90m 3 |[39m   [33mVoiceArchetypeSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mCouncilMode[39m[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m } [36mfrom[39m [32m'./voice-system-coordinator.js'[39m[33m;[39m
     [90m 6 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/src/voices/voice-archetype-system.ts:4:37)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/living-spiral.test.ts:5:34)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/living-spiral.test.ts
  ‚óè Test suite failed to run

    Cannot find module './voice-system-coordinator.js' from '.code/branches/code-claude-refactor-very-large/src/voices/voice-archetype-system.ts'

    Require stack:
      .code/branches/code-claude-refactor-very-large/src/voices/voice-archetype-system.ts
      .code/branches/code-claude-refactor-very-large/tests/unit/living-spiral.test.ts

    [0m [90m 2 |[39m   [33mVoiceSystemCoordinator[39m[33m,[39m
     [90m 3 |[39m   [33mVoiceArchetypeSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mCouncilMode[39m[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m } [36mfrom[39m [32m'./voice-system-coordinator.js'[39m[33m;[39m
     [90m 6 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/src/voices/voice-archetype-system.ts:4:37)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/living-spiral.test.ts:5:34)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from '.code/branches/code-code-refactor-very-large/tests/unit/core/logger.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m[33m,[39m logger } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m [36mimport[39m { existsSync[33m,[39m unlinkSync[33m,[39m readFileSync } [36mfrom[39m [32m'fs'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m { homedir } [36mfrom[39m [32m'os'[39m[33m;[39m
     [90m 10 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/logger.test.ts:7:18)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/logger.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m[33m,[39m logger } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m [36mimport[39m { existsSync[33m,[39m unlinkSync[33m,[39m readFileSync } [36mfrom[39m [32m'fs'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m { homedir } [36mfrom[39m [32m'os'[39m[33m;[39m
     [90m 10 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/logger.test.ts:7:18)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/logger.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m[33m,[39m logger } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m [36mimport[39m { existsSync[33m,[39m unlinkSync[33m,[39m readFileSync } [36mfrom[39m [32m'fs'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m { homedir } [36mfrom[39m [32m'os'[39m[33m;[39m
     [90m 10 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/logger.test.ts:7:18)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/response-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/response-types' from '.code/branches/code-code-refactor-very-large/tests/unit/response-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mResponseFactory[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mResponseValidator[39m[33m,[39m
     [90m   |[39m                          [31m[1m^[22m[39m
     [90m 5 |[39m   [33mAgentResponse[39m[33m,[39m
     [90m 6 |[39m   [33mSynthesisResponse[39m[33m,[39m
     [90m 7 |[39m   [33mToolResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/response-system.test.ts:4:26)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/response-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/response-types' from '.code/branches/code-gemini-refactor-very-large/tests/unit/response-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mResponseFactory[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mResponseValidator[39m[33m,[39m
     [90m   |[39m                          [31m[1m^[22m[39m
     [90m 5 |[39m   [33mAgentResponse[39m[33m,[39m
     [90m 6 |[39m   [33mSynthesisResponse[39m[33m,[39m
     [90m 7 |[39m   [33mToolResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/response-system.test.ts:4:26)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/response-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/response-types' from '.code/branches/code-claude-refactor-very-large/tests/unit/response-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mResponseFactory[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mResponseValidator[39m[33m,[39m
     [90m   |[39m                          [31m[1m^[22m[39m
     [90m 5 |[39m   [33mAgentResponse[39m[33m,[39m
     [90m 6 |[39m   [33mSynthesisResponse[39m[33m,[39m
     [90m 7 |[39m   [33mToolResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/response-system.test.ts:4:26)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/logger-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from '.code/branches/code-code-refactor-very-large/tests/unit/core/logger-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m describe([32m'Logger Enterprise System'[39m[33m,[39m () [33m=>[39m {
     [90m 10 |[39m   [36mlet[39m testLogger[33m:[39m [33mLogger[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/logger-simple.test.ts:7:18)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/logger-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/logger-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m describe([32m'Logger Enterprise System'[39m[33m,[39m () [33m=>[39m {
     [90m 10 |[39m   [36mlet[39m testLogger[33m:[39m [33mLogger[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/logger-simple.test.ts:7:18)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/logger-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/logger-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m describe([32m'Logger Enterprise System'[39m[33m,[39m () [33m=>[39m {
     [90m 10 |[39m   [36mlet[39m testLogger[33m:[39m [33mLogger[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/logger-simple.test.ts:7:18)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/types-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from '.code/branches/code-code-refactor-very-large/tests/unit/core/types-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/types-simple.test.ts:7:24)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/types-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/types-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/types-simple.test.ts:7:24)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/types-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/types-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/types-simple.test.ts:7:24)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/rust/rust-provider-client.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRustProviderClient[39m } [36mfrom[39m [32m'../../../../src/infrastructure/rust/rust-provider-client.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RustProviderClient'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m   [36mlet[39m client[33m:[39m [33mRustProviderClient[39m[33m;[39m
     [90m 6 |[39m   [36mlet[39m getRustModule[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m
     [90m 7 |[39m   [36mlet[39m isHealthy[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts:4:35)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/rust/rust-provider-client.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRustProviderClient[39m } [36mfrom[39m [32m'../../../../src/infrastructure/rust/rust-provider-client.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RustProviderClient'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m   [36mlet[39m client[33m:[39m [33mRustProviderClient[39m[33m;[39m
     [90m 6 |[39m   [36mlet[39m getRustModule[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m
     [90m 7 |[39m   [36mlet[39m isHealthy[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts:4:35)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/rust/rust-provider-client.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRustProviderClient[39m } [36mfrom[39m [32m'../../../../src/infrastructure/rust/rust-provider-client.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RustProviderClient'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m   [36mlet[39m client[33m:[39m [33mRustProviderClient[39m[33m;[39m
     [90m 6 |[39m   [36mlet[39m getRustModule[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m
     [90m 7 |[39m   [36mlet[39m isHealthy[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/rust/rust-provider-client.test.ts:4:35)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/cache/unified-cache-system.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mUnifiedCacheSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   defaultUnifiedCacheConfig[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/cache/unified-cache-system.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'UnifiedCacheSystem embeddings'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts:3:35)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/cache/unified-cache-system.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mUnifiedCacheSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   defaultUnifiedCacheConfig[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/cache/unified-cache-system.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'UnifiedCacheSystem embeddings'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts:3:35)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/cache/unified-cache-system.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mUnifiedCacheSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   defaultUnifiedCacheConfig[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/cache/unified-cache-system.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'UnifiedCacheSystem embeddings'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/cache/unified-cache-system.test.ts:3:35)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/observability/observability-system.ts' from '.code/branches/code-code-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mSynthesisCoordinator[39m } [36mfrom[39m [32m'../../../src/core/application/synthesis-coordinator.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { [33mDependencyContainer[39m } [36mfrom[39m [32m'../../../src/core/di/dependency-container.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m {
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mCLIENT_TOKEN[39m[33m,[39m
     [90m 5 |[39m   [33mCACHE_COORDINATOR_TOKEN[39m[33m,[39m
     [90m 6 |[39m   [33mSECURITY_VALIDATOR_TOKEN[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts:3:6)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/observability/observability-system.ts' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mSynthesisCoordinator[39m } [36mfrom[39m [32m'../../../src/core/application/synthesis-coordinator.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { [33mDependencyContainer[39m } [36mfrom[39m [32m'../../../src/core/di/dependency-container.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m {
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mCLIENT_TOKEN[39m[33m,[39m
     [90m 5 |[39m   [33mCACHE_COORDINATOR_TOKEN[39m[33m,[39m
     [90m 6 |[39m   [33mSECURITY_VALIDATOR_TOKEN[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts:3:6)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/observability/observability-system.ts' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mSynthesisCoordinator[39m } [36mfrom[39m [32m'../../../src/core/application/synthesis-coordinator.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { [33mDependencyContainer[39m } [36mfrom[39m [32m'../../../src/core/di/dependency-container.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m {
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mCLIENT_TOKEN[39m[33m,[39m
     [90m 5 |[39m   [33mCACHE_COORDINATOR_TOKEN[39m[33m,[39m
     [90m 6 |[39m   [33mSECURITY_VALIDATOR_TOKEN[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/synthesis-coordinator-telemetry.test.ts:3:6)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/input-sanitizer.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mInputSanitizer[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/input-sanitizer.js'[39m[33m;[39m
     [90m 3 |[39m [36mimport[39m { [33mSecurityPolicyLoader[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-policy-loader.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 4 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 5 |[39m describe([32m'InputSanitizer initialization'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m   beforeEach(() [33m=>[39m {
     [90m 7 |[39m     ([33mInputSanitizer[39m [36mas[39m any)[33m.[39mallowedCommands [33m=[39m [36mnull[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts:4:30)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/input-sanitizer.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mInputSanitizer[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/input-sanitizer.js'[39m[33m;[39m
     [90m 3 |[39m [36mimport[39m { [33mSecurityPolicyLoader[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-policy-loader.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 4 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 5 |[39m describe([32m'InputSanitizer initialization'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m   beforeEach(() [33m=>[39m {
     [90m 7 |[39m     ([33mInputSanitizer[39m [36mas[39m any)[33m.[39mallowedCommands [33m=[39m [36mnull[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts:4:30)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/input-sanitizer.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mInputSanitizer[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/input-sanitizer.js'[39m[33m;[39m
     [90m 3 |[39m [36mimport[39m { [33mSecurityPolicyLoader[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-policy-loader.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 4 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 5 |[39m describe([32m'InputSanitizer initialization'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m   beforeEach(() [33m=>[39m {
     [90m 7 |[39m     ([33mInputSanitizer[39m [36mas[39m any)[33m.[39mallowedCommands [33m=[39m [36mnull[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/input-sanitizer.test.ts:4:30)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/domain/tools/unified-file-tool.js' from '.code/branches/code-code-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mUnifiedFileTool[39m } [36mfrom[39m [32m'../../../src/domain/tools/unified-file-tool.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { [33mToolExecutionContext[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/tool-system.js'[39m[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m [36mlet[39m rootDir[33m:[39m string[33m;[39m
     [90m 10 |[39m [36mlet[39m outsideFile[33m:[39m string[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts:7:32)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/domain/tools/unified-file-tool.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mUnifiedFileTool[39m } [36mfrom[39m [32m'../../../src/domain/tools/unified-file-tool.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { [33mToolExecutionContext[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/tool-system.js'[39m[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m [36mlet[39m rootDir[33m:[39m string[33m;[39m
     [90m 10 |[39m [36mlet[39m outsideFile[33m:[39m string[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts:7:32)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/domain/tools/unified-file-tool.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mUnifiedFileTool[39m } [36mfrom[39m [32m'../../../src/domain/tools/unified-file-tool.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { [33mToolExecutionContext[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/tool-system.js'[39m[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m [36mlet[39m rootDir[33m:[39m string[33m;[39m
     [90m 10 |[39m [36mlet[39m outsideFile[33m:[39m string[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/domain/unified-file-tool.test.ts:7:32)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/rate-limiter.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRateLimiter[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/rate-limiter.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RateLimiter timer cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                           [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts:4:27)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/rate-limiter.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRateLimiter[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/rate-limiter.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RateLimiter timer cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                           [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts:4:27)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/rate-limiter.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRateLimiter[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/rate-limiter.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RateLimiter timer cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                           [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/rate-limiter.test.ts:4:27)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/utils/version.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/utils/version.js' from '.code/branches/code-code-refactor-very-large/tests/unit/utils/version.test.ts'

    [0m [90m 36 |[39m     )[33m;[39m
     [90m 37 |[39m   })[33m;[39m
    [31m[1m>[22m[39m[90m 38 |[39m })[33m;[39m
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 39 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/utils/version.test.ts:38:22)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/utils/version.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/utils/version.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/utils/version.test.ts'

    [0m [90m 36 |[39m     )[33m;[39m
     [90m 37 |[39m   })[33m;[39m
    [31m[1m>[22m[39m[90m 38 |[39m })[33m;[39m
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 39 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/utils/version.test.ts:38:22)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/utils/version.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/utils/version.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/utils/version.test.ts'

    [0m [90m 36 |[39m     )[33m;[39m
     [90m 37 |[39m   })[33m;[39m
    [31m[1m>[22m[39m[90m 38 |[39m })[33m;[39m
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 39 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/utils/version.test.ts:38:22)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/services/service-factory.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mServiceFactory[39m } [36mfrom[39m [32m'../../../src/application/services/service-factory.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mILogger[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/logger.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ServiceFactory disposal'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   [36mfunction[39m createTestLogger()[33m:[39m [33mILogger[39m {
     [90m 6 |[39m     [36mreturn[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts:3:30)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/services/service-factory.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mServiceFactory[39m } [36mfrom[39m [32m'../../../src/application/services/service-factory.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mILogger[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/logger.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ServiceFactory disposal'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   [36mfunction[39m createTestLogger()[33m:[39m [33mILogger[39m {
     [90m 6 |[39m     [36mreturn[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts:3:30)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/services/service-factory.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mServiceFactory[39m } [36mfrom[39m [32m'../../../src/application/services/service-factory.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mILogger[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/logger.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ServiceFactory disposal'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   [36mfunction[39m createTestLogger()[33m:[39m [33mILogger[39m {
     [90m 6 |[39m     [36mreturn[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/service-factory-disposal.test.ts:3:30)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/context/context-window-manager.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mContextWindowManager[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   [33mFileAnalysisResult[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../src/application/context/context-window-manager.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'ContextWindowManager semantic chunking'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts:3:37)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/context/context-window-manager.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mContextWindowManager[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   [33mFileAnalysisResult[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../src/application/context/context-window-manager.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'ContextWindowManager semantic chunking'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts:3:37)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/context/context-window-manager.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mContextWindowManager[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   [33mFileAnalysisResult[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../src/application/context/context-window-manager.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'ContextWindowManager semantic chunking'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/context/context-window-manager.test.ts:3:37)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/tool-execution-router.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mToolExecutionRouter[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/tool-execution-router.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mIMcpManager[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/mcp-manager.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m type { [33mWorkflowRequest[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/workflow-orchestrator.js'[39m[33m;[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 4 |[39m [36mimport[39m type {
     [90m 5 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 6 |[39m   [33mModelResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts:3:36)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/tool-execution-router.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mToolExecutionRouter[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/tool-execution-router.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mIMcpManager[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/mcp-manager.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m type { [33mWorkflowRequest[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/workflow-orchestrator.js'[39m[33m;[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 4 |[39m [36mimport[39m type {
     [90m 5 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 6 |[39m   [33mModelResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts:3:36)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/tool-execution-router.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mToolExecutionRouter[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/tool-execution-router.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mIMcpManager[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/mcp-manager.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m type { [33mWorkflowRequest[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/workflow-orchestrator.js'[39m[33m;[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 4 |[39m [36mimport[39m type {
     [90m 5 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 6 |[39m   [33mModelResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/tool-execution-router.test.ts:3:36)

FAIL tests/unit/application/orchestrator/tool-execution-router.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/tool-execution-router.js' from 'tests/unit/application/orchestrator/tool-execution-router.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mToolExecutionRouter[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/tool-execution-router.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mIMcpManager[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/mcp-manager.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m type { [33mWorkflowRequest[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/workflow-orchestrator.js'[39m[33m;[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 4 |[39m [36mimport[39m type {
     [90m 5 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 6 |[39m   [33mModelResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/orchestrator/tool-execution-router.test.ts:3:36)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/streaming-handler.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mStreamingManager[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/streaming-manager.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type {
    [31m[1m>[22m[39m[90m 3 |[39m   [33mIModelClient[39m[33m,[39m
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 5 |[39m   [33mModelResponse[39m[33m,[39m
     [90m 6 |[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/model-client.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts:3:6)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/streaming-handler.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mStreamingManager[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/streaming-manager.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type {
    [31m[1m>[22m[39m[90m 3 |[39m   [33mIModelClient[39m[33m,[39m
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 5 |[39m   [33mModelResponse[39m[33m,[39m
     [90m 6 |[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/model-client.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts:3:6)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/streaming-handler.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mStreamingManager[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/streaming-manager.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type {
    [31m[1m>[22m[39m[90m 3 |[39m   [33mIModelClient[39m[33m,[39m
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 5 |[39m   [33mModelResponse[39m[33m,[39m
     [90m 6 |[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/model-client.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/streaming-manager.test.ts:3:6)

FAIL tests/unit/application/orchestrator/streaming-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/orchestrator/streaming-handler.js' from 'tests/unit/application/orchestrator/streaming-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mStreamingManager[39m } [36mfrom[39m [32m'../../../../src/application/services/orchestrator/streaming-manager.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type {
    [31m[1m>[22m[39m[90m 3 |[39m   [33mIModelClient[39m[33m,[39m
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mModelRequest[39m[33m,[39m
     [90m 5 |[39m   [33mModelResponse[39m[33m,[39m
     [90m 6 |[39m } [36mfrom[39m [32m'../../../../src/domain/interfaces/model-client.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/orchestrator/streaming-manager.test.ts:3:6)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/tools/enhanced-tool-integration.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mEnhancedToolIntegration[39m } [36mfrom[39m [32m'../../../../src/infrastructure/tools/enhanced-tool-integration.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'EnhancedToolIntegration cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts:4:40)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/tools/enhanced-tool-integration.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mEnhancedToolIntegration[39m } [36mfrom[39m [32m'../../../../src/infrastructure/tools/enhanced-tool-integration.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'EnhancedToolIntegration cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts:4:40)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/tools/enhanced-tool-integration.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mEnhancedToolIntegration[39m } [36mfrom[39m [32m'../../../../src/infrastructure/tools/enhanced-tool-integration.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'EnhancedToolIntegration cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts:4:40)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/security-audit-logger.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts'

    [0m [90m 4 |[39m [36mimport[39m {
     [90m 5 |[39m   [33mSecurityAuditLogger[39m[33m,[39m
    [31m[1m>[22m[39m[90m 6 |[39m   [33mAuditOutcome[39m[33m,[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-audit-logger.js'[39m[33m;[39m
     [90m 8 |[39m
     [90m 9 |[39m describe([32m'SecurityAuditLogger'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts:6:36)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/security-audit-logger.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts'

    [0m [90m 4 |[39m [36mimport[39m {
     [90m 5 |[39m   [33mSecurityAuditLogger[39m[33m,[39m
    [31m[1m>[22m[39m[90m 6 |[39m   [33mAuditOutcome[39m[33m,[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-audit-logger.js'[39m[33m;[39m
     [90m 8 |[39m
     [90m 9 |[39m describe([32m'SecurityAuditLogger'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts:6:36)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/security-audit-logger.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts'

    [0m [90m 4 |[39m [36mimport[39m {
     [90m 5 |[39m   [33mSecurityAuditLogger[39m[33m,[39m
    [31m[1m>[22m[39m[90m 6 |[39m   [33mAuditOutcome[39m[33m,[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-audit-logger.js'[39m[33m;[39m
     [90m 8 |[39m
     [90m 9 |[39m describe([32m'SecurityAuditLogger'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/security-audit-logger.test.ts:6:36)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/providers/ollama-utils.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-config.js' from '.code/branches/code-code-refactor-very-large/tests/unit/providers/ollama-utils.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { parseEnvInt[33m,[39m [33mOllamaToolCall[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-config.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { extractToolCalls } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-tool-processor.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ollama utils'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   test([32m'parseEnvInt respects bounds'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m     process[33m.[39menv[33m.[39m[33mTEST_INT[39m [33m=[39m [32m'50'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/providers/ollama-utils.test.ts:3:28)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/providers/ollama-utils.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-config.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/providers/ollama-utils.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { parseEnvInt[33m,[39m [33mOllamaToolCall[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-config.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { extractToolCalls } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-tool-processor.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ollama utils'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   test([32m'parseEnvInt respects bounds'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m     process[33m.[39menv[33m.[39m[33mTEST_INT[39m [33m=[39m [32m'50'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/providers/ollama-utils.test.ts:3:28)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/providers/ollama-utils.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-config.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/providers/ollama-utils.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { parseEnvInt[33m,[39m [33mOllamaToolCall[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-config.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { extractToolCalls } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-tool-processor.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ollama utils'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   test([32m'parseEnvInt respects bounds'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m     process[33m.[39menv[33m.[39m[33mTEST_INT[39m [33m=[39m [32m'50'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/providers/ollama-utils.test.ts:3:28)

FAIL tests/unit/providers/ollama-utils.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-config.js' from 'tests/unit/providers/ollama-utils.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { parseEnvInt[33m,[39m [33mOllamaToolCall[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-config.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { extractToolCalls } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-tool-processor.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ollama utils'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   test([32m'parseEnvInt respects bounds'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m     process[33m.[39menv[33m.[39m[33mTEST_INT[39m [33m=[39m [32m'50'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/providers/ollama-utils.test.ts:3:28)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/intelligence/lazy-project-intelligence.js' from '.code/branches/code-code-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mLazyProjectIntelligenceSystem[39m } [36mfrom[39m [32m'../../../../src/core/intelligence/lazy-project-intelligence.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'LazyProjectIntelligenceSystem cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts:4:40)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/intelligence/lazy-project-intelligence.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mLazyProjectIntelligenceSystem[39m } [36mfrom[39m [32m'../../../../src/core/intelligence/lazy-project-intelligence.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'LazyProjectIntelligenceSystem cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts:4:40)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/intelligence/lazy-project-intelligence.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mLazyProjectIntelligenceSystem[39m } [36mfrom[39m [32m'../../../../src/core/intelligence/lazy-project-intelligence.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'LazyProjectIntelligenceSystem cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts:4:40)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/cli/analysis-worker-pool.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mAnalysisWorkerPool[39m } [36mfrom[39m [32m'../../../src/application/cli/analysis-worker-pool.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'AnalysisWorkerPool'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'processes tasks concurrently'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m pool [33m=[39m [36mnew[39m [33mAnalysisWorkerPool[39m([35m2[39m)[33m;[39m
     [90m 6 |[39m     [36mconst[39m start [33m=[39m [33mDate[39m[33m.[39mnow()[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts:3:35)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/cli/analysis-worker-pool.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mAnalysisWorkerPool[39m } [36mfrom[39m [32m'../../../src/application/cli/analysis-worker-pool.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'AnalysisWorkerPool'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'processes tasks concurrently'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m pool [33m=[39m [36mnew[39m [33mAnalysisWorkerPool[39m([35m2[39m)[33m;[39m
     [90m 6 |[39m     [36mconst[39m start [33m=[39m [33mDate[39m[33m.[39mnow()[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts:3:35)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/cli/analysis-worker-pool.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mAnalysisWorkerPool[39m } [36mfrom[39m [32m'../../../src/application/cli/analysis-worker-pool.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'AnalysisWorkerPool'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'processes tasks concurrently'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m pool [33m=[39m [36mnew[39m [33mAnalysisWorkerPool[39m([35m2[39m)[33m;[39m
     [90m 6 |[39m     [36mconst[39m start [33m=[39m [33mDate[39m[33m.[39mnow()[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/cli/analysis-worker-pool.test.ts:3:35)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/provider-capability-registry.js' from '.code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProviderCapabilityRegistry[39m } [36mfrom[39m [32m'../../../../src/application/services/provider-capability-registry.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProviderCapabilityRegistry'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                           [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'registers and checks capabilities'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m registry [33m=[39m [36mnew[39m [33mProviderCapabilityRegistry[39m()[33m;[39m
     [90m 6 |[39m     registry[33m.[39mregister([32m'test'[39m[33m,[39m { streaming[33m:[39m [36mtrue[39m[33m,[39m toolCalling[33m:[39m [36mfalse[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts:3:43)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/provider-capability-registry.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProviderCapabilityRegistry[39m } [36mfrom[39m [32m'../../../../src/application/services/provider-capability-registry.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProviderCapabilityRegistry'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                           [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'registers and checks capabilities'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m registry [33m=[39m [36mnew[39m [33mProviderCapabilityRegistry[39m()[33m;[39m
     [90m 6 |[39m     registry[33m.[39mregister([32m'test'[39m[33m,[39m { streaming[33m:[39m [36mtrue[39m[33m,[39m toolCalling[33m:[39m [36mfalse[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts:3:43)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/provider-capability-registry.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProviderCapabilityRegistry[39m } [36mfrom[39m [32m'../../../../src/application/services/provider-capability-registry.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProviderCapabilityRegistry'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                           [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'registers and checks capabilities'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m registry [33m=[39m [36mnew[39m [33mProviderCapabilityRegistry[39m()[33m;[39m
     [90m 6 |[39m     registry[33m.[39mregister([32m'test'[39m[33m,[39m { streaming[33m:[39m [36mtrue[39m[33m,[39m toolCalling[33m:[39m [36mfalse[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/application/orchestrator/provider-capability-registry.test.ts:3:43)

FAIL tests/unit/application/orchestrator/provider-capability-registry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/services/provider-capability-registry.js' from 'tests/unit/application/orchestrator/provider-capability-registry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProviderCapabilityRegistry[39m } [36mfrom[39m [32m'../../../../src/application/services/provider-capability-registry.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProviderCapabilityRegistry'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                           [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'registers and checks capabilities'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m registry [33m=[39m [36mnew[39m [33mProviderCapabilityRegistry[39m()[33m;[39m
     [90m 6 |[39m     registry[33m.[39mregister([32m'test'[39m[33m,[39m { streaming[33m:[39m [36mtrue[39m[33m,[39m toolCalling[33m:[39m [36mfalse[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/orchestrator/provider-capability-registry.test.ts:3:43)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/production-rbac-system.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProductionRBACSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/production-rbac-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProductionRBACSystem cache cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m rbac [33m=[39m [36mnew[39m [33mProductionRBACSystem[39m({} [36mas[39m any[33m,[39m {} [36mas[39m any)[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts:3:37)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/production-rbac-system.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProductionRBACSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/production-rbac-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProductionRBACSystem cache cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m rbac [33m=[39m [36mnew[39m [33mProductionRBACSystem[39m({} [36mas[39m any[33m,[39m {} [36mas[39m any)[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts:3:37)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/production-rbac-system.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProductionRBACSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/production-rbac-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProductionRBACSystem cache cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m rbac [33m=[39m [36mnew[39m [33mProductionRBACSystem[39m({} [36mas[39m any[33m,[39m {} [36mas[39m any)[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/security/production-rbac-system.test.ts:3:37)

FAIL .code/branches/code-code-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/monitoring/user-warning-system.js' from '.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mUserWarningSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/monitoring/user-warning-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'UserWarningSystem long-running warnings'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                  [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m system [33m=[39m [36mnew[39m [33mUserWarningSystem[39m({ longRunningWarningInterval[33m:[39m [35m1000[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-code-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts:3:34)

FAIL .code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/monitoring/user-warning-system.js' from '.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mUserWarningSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/monitoring/user-warning-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'UserWarningSystem long-running warnings'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                  [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m system [33m=[39m [36mnew[39m [33mUserWarningSystem[39m({ longRunningWarningInterval[33m:[39m [35m1000[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-gemini-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts:3:34)

FAIL .code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/monitoring/user-warning-system.js' from '.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mUserWarningSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/monitoring/user-warning-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'UserWarningSystem long-running warnings'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                  [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m system [33m=[39m [36mnew[39m [33mUserWarningSystem[39m({ longRunningWarningInterval[33m:[39m [35m1000[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (.code/branches/code-claude-refactor-very-large/tests/unit/infrastructure/monitoring/user-warning-system.test.ts:3:34)

FAIL tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/tools/enhanced-tool-integration.js' from 'tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mEnhancedToolIntegration[39m } [36mfrom[39m [32m'../../../../src/infrastructure/tools/enhanced-tool-integration.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'EnhancedToolIntegration cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/tools/enhanced-tool-integration.test.ts:4:40)

FAIL tests/unit/infrastructure/security/security-audit-logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/security-audit-logger.js' from 'tests/unit/infrastructure/security/security-audit-logger.test.ts'

    [0m [90m 4 |[39m [36mimport[39m {
     [90m 5 |[39m   [33mSecurityAuditLogger[39m[33m,[39m
    [31m[1m>[22m[39m[90m 6 |[39m   [33mAuditOutcome[39m[33m,[39m
     [90m   |[39m                                    [31m[1m^[22m[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-audit-logger.js'[39m[33m;[39m
     [90m 8 |[39m
     [90m 9 |[39m describe([32m'SecurityAuditLogger'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/security/security-audit-logger.test.ts:6:36)

FAIL tests/unit/infrastructure/security/rate-limiter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/rate-limiter.js' from 'tests/unit/infrastructure/security/rate-limiter.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRateLimiter[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/rate-limiter.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RateLimiter timer cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                           [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/security/rate-limiter.test.ts:4:27)

FAIL tests/unit/infrastructure/security/production-rbac-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/production-rbac-system.js' from 'tests/unit/infrastructure/security/production-rbac-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mProductionRBACSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/production-rbac-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'ProductionRBACSystem cache cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m rbac [33m=[39m [36mnew[39m [33mProductionRBACSystem[39m({} [36mas[39m any[33m,[39m {} [36mas[39m any)[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/security/production-rbac-system.test.ts:3:37)

FAIL tests/unit/infrastructure/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/modern-input-sanitizer.js' from 'tests/unit/infrastructure/security/modern-input-sanitizer.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mModernInputSanitizer[39m[33m,[39m
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 11 |[39m   [33mSanitizationResult[39m[33m,[39m
     [90m 12 |[39m   [33mConsentManager[39m[33m,[39m
     [90m 13 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/modern-input-sanitizer.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/security/modern-input-sanitizer.test.ts:10:37)

FAIL tests/unit/infrastructure/security/input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/security/input-sanitizer.js' from 'tests/unit/infrastructure/security/input-sanitizer.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mInputSanitizer[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/input-sanitizer.js'[39m[33m;[39m
     [90m 3 |[39m [36mimport[39m { [33mSecurityPolicyLoader[39m } [36mfrom[39m [32m'../../../../src/infrastructure/security/security-policy-loader.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 4 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 5 |[39m describe([32m'InputSanitizer initialization'[39m[33m,[39m () [33m=>[39m {
     [90m 6 |[39m   beforeEach(() [33m=>[39m {
     [90m 7 |[39m     ([33mInputSanitizer[39m [36mas[39m any)[33m.[39mallowedCommands [33m=[39m [36mnull[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/security/input-sanitizer.test.ts:4:30)

FAIL tests/unit/infrastructure/monitoring/user-warning-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/monitoring/user-warning-system.js' from 'tests/unit/infrastructure/monitoring/user-warning-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mUserWarningSystem[39m } [36mfrom[39m [32m'../../../../src/infrastructure/monitoring/user-warning-system.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'UserWarningSystem long-running warnings'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                  [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'clears interval on shutdown'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 6 |[39m     [36mconst[39m system [33m=[39m [36mnew[39m [33mUserWarningSystem[39m({ longRunningWarningInterval[33m:[39m [35m1000[39m })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/monitoring/user-warning-system.test.ts:3:34)

FAIL tests/unit/infrastructure/cache/unified-cache-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/cache/unified-cache-system.js' from 'tests/unit/infrastructure/cache/unified-cache-system.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mUnifiedCacheSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   defaultUnifiedCacheConfig[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../../src/infrastructure/cache/unified-cache-system.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'UnifiedCacheSystem embeddings'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/cache/unified-cache-system.test.ts:3:35)

FAIL tests/unit/infrastructure/rust/rust-provider-client.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/infrastructure/rust/rust-provider-client.js' from 'tests/unit/infrastructure/rust/rust-provider-client.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mRustProviderClient[39m } [36mfrom[39m [32m'../../../../src/infrastructure/rust/rust-provider-client.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'RustProviderClient'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m   [36mlet[39m client[33m:[39m [33mRustProviderClient[39m[33m;[39m
     [90m 6 |[39m   [36mlet[39m getRustModule[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m
     [90m 7 |[39m   [36mlet[39m isHealthy[33m:[39m jest[33m.[39m[33mMock[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/infrastructure/rust/rust-provider-client.test.ts:4:35)

FAIL tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/intelligence/lazy-project-intelligence.js' from 'tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m { [33mLazyProjectIntelligenceSystem[39m } [36mfrom[39m [32m'../../../../src/core/intelligence/lazy-project-intelligence.js'[39m[33m;[39m
     [90m 3 |[39m
    [31m[1m>[22m[39m[90m 4 |[39m describe([32m'LazyProjectIntelligenceSystem cleanup'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                        [31m[1m^[22m[39m
     [90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m 6 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 7 |[39m   })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/intelligence/lazy-project-intelligence-system.test.ts:4:40)

FAIL tests/unit/core/di/dependency-container.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/di/dependency-container.js' from 'tests/unit/core/di/dependency-container.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mDependencyContainer[39m[33m,[39m
     [90m 11 |[39m   [33mDependencyScope[39m[33m,[39m
     [90m 12 |[39m   [33mServiceLifecycle[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/di/dependency-container.test.ts:9:35)

FAIL tests/unit/core/auth/rbac-policy-engine.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/rbac-policy-engine.js' from 'tests/unit/core/auth/rbac-policy-engine.test.ts'

    [0m [90m 14 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m 15 |[39m [36mimport[39m { [33mRBACPolicyEngine[39m } [36mfrom[39m [32m'../../../../src/core/auth/rbac-policy-engine.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 16 |[39m [36mimport[39m {
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 17 |[39m   [33mPolicy[39m[33m,[39m
     [90m 18 |[39m   [33mPolicyContext[39m[33m,[39m
     [90m 19 |[39m   [33mRole[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/auth/rbac-policy-engine.test.ts:16:33)

FAIL tests/unit/core/auth/jwt-authenticator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/auth/jwt-authenticator.js' from 'tests/unit/core/auth/jwt-authenticator.test.ts'

    [0m [90m 17 |[39m [36mimport[39m jwt [36mfrom[39m [32m'jsonwebtoken'[39m[33m;[39m
     [90m 18 |[39m [36mimport[39m crypto [36mfrom[39m [32m'crypto'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 19 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 20 |[39m describe([32m'JWTAuthenticator - Critical Security Tests'[39m[33m,[39m () [33m=>[39m {
     [90m 21 |[39m   [36mlet[39m authenticator[33m:[39m [33mJWTAuthenticator[39m[33m;[39m
     [90m 22 |[39m   [36mlet[39m config[33m:[39m [33mAuthConfig[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/auth/jwt-authenticator.test.ts:19:32)

FAIL tests/unit/core/agents/agent-communication-protocol.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/core/agents/agent-communication-protocol.js' from 'tests/unit/core/agents/agent-communication-protocol.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { [33mEventEmitter[39m } [36mfrom[39m [32m'events'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m 10 |[39m   [33mAgentCommunicationProtocol[39m[33m,[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 11 |[39m   [33mAgent[39m[33m,[39m
     [90m 12 |[39m   [33mAgentCapability[39m[33m,[39m
     [90m 13 |[39m   [33mAgentTask[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/agents/agent-communication-protocol.test.ts:10:43)

FAIL tests/unit/application/context/context-window-manager.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/context/context-window-manager.js' from 'tests/unit/application/context/context-window-manager.test.ts'

    [0m [90m 1 |[39m [36mimport[39m {
     [90m 2 |[39m   [33mContextWindowManager[39m[33m,[39m
    [31m[1m>[22m[39m[90m 3 |[39m   [33mFileAnalysisResult[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 4 |[39m } [36mfrom[39m [32m'../../../src/application/context/context-window-manager.js'[39m[33m;[39m
     [90m 5 |[39m
     [90m 6 |[39m describe([32m'ContextWindowManager semantic chunking'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/context/context-window-manager.test.ts:3:37)

FAIL tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../../src/application/coordinators/simplified-living-spiral-coordinator.js' from 'tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  9 |[39m   [33mSimplifiedLivingSpiralCoordinator[39m[33m,[39m
     [90m    |[39m                                                   [31m[1m^[22m[39m
     [90m 10 |[39m   [33mSimplifiedSpiralConfig[39m[33m,[39m
     [90m 11 |[39m   [33mSimplifiedSpiralInput[39m[33m,[39m
     [90m 12 |[39m   [33mSimplifiedSpiralOutput[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/coordinators/simplified-living-spiral-coordinator.test.ts:9:51)

FAIL tests/unit/application/cli/analysis-worker-pool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/cli/analysis-worker-pool.js' from 'tests/unit/application/cli/analysis-worker-pool.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mAnalysisWorkerPool[39m } [36mfrom[39m [32m'../../../src/application/cli/analysis-worker-pool.js'[39m[33m;[39m
     [90m 2 |[39m
    [31m[1m>[22m[39m[90m 3 |[39m describe([32m'AnalysisWorkerPool'[39m[33m,[39m () [33m=>[39m {
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 4 |[39m   it([32m'processes tasks concurrently'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 5 |[39m     [36mconst[39m pool [33m=[39m [36mnew[39m [33mAnalysisWorkerPool[39m([35m2[39m)[33m;[39m
     [90m 6 |[39m     [36mconst[39m start [33m=[39m [33mDate[39m[33m.[39mnow()[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/cli/analysis-worker-pool.test.ts:3:35)

FAIL tests/unit/utils/version.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/utils/version.js' from 'tests/unit/utils/version.test.ts'

    [0m [90m 36 |[39m     )[33m;[39m
     [90m 37 |[39m   })[33m;[39m
    [31m[1m>[22m[39m[90m 38 |[39m })[33m;[39m
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 39 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/utils/version.test.ts:38:22)

FAIL tests/unit/security/modern-input-sanitizer.test.ts
  ‚óè Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     ‚Ä¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     ‚Ä¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     ‚Ä¢ To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     ‚Ä¢ If you need a custom transformation specify a "transform" option in your config.
     ‚Ä¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\Admin\Documents\RST\codecrucible-synth\tests\unit\security\modern-input-sanitizer.test.ts:47
                /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    SyntaxError: Invalid regular expression: /('|(\\')|(;)|(\-\-)|(\s+(or|and)\s+)|(\s+(union|select|insert|update|delete|drop|create|alter|exec|execute)\s+)/gi: Unterminated group

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)

FAIL tests/unit/providers/ollama-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/ollama-provider.js' from 'tests/unit/providers/ollama-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mOllamaProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/ollama-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/providers/ollama-provider-adapter.test.ts:8:30)

FAIL tests/unit/providers/lm-studio-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/lm-studio-provider.js' from 'tests/unit/providers/lm-studio-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/lm-studio-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/providers/lm-studio-provider-adapter.test.ts:8:33)

FAIL tests/unit/providers/lm-studio-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/lm-studio.js' from 'tests/unit/providers/lm-studio-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mLMStudioProvider[39m } [36mfrom[39m [32m'../../../src/providers/lm-studio.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/providers/lm-studio-adapter.test.ts:8:24)

FAIL tests/unit/providers/huggingface-provider-adapter.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/providers/hybrid/huggingface-provider.js' from 'tests/unit/providers/huggingface-provider-adapter.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m jest } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { [33mHuggingFaceProvider[39m } [36mfrom[39m [32m'../../../src/providers/hybrid/huggingface-provider.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m [90m// Mock fetch globally[39m
     [90m 10 |[39m [36mconst[39m mockFetch [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 11 |[39m global[33m.[39mfetch [33m=[39m mockFetch [36mas[39m jest[33m.[39m[33mMockedFunction[39m[33m<[39m[36mtypeof[39m fetch[33m>[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/providers/huggingface-provider-adapter.test.ts:8:35)

FAIL tests/unit/quality/reconstructed-code-quality-analyzer.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/quality/reconstructed-code-quality-analyzer.js' from 'tests/unit/quality/reconstructed-code-quality-analyzer.test.ts'

    [0m [90m  7 |[39m [36mimport[39m { jest[33m,[39m describe[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m it[33m,[39m expect } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m { [33mReconstructedCodeQualityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/reconstructed-code-quality-analyzer.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m { [33mASTComplexityAnalyzer[39m } [36mfrom[39m [32m'../../../src/core/quality/ast-complexity-analyzer.js'[39m[33m;[39m
     [90m    |[39m                                                  [31m[1m^[22m[39m
     [90m 10 |[39m [36mimport[39m { [33mAsyncToolIntegrationManager[39m } [36mfrom[39m [32m'../../../src/core/quality/async-tool-integration-manager.js'[39m[33m;[39m
     [90m 11 |[39m
     [90m 12 |[39m describe([32m'ReconstructedCodeQualityAnalyzer'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/quality/reconstructed-code-quality-analyzer.test.ts:9:50)

FAIL tests/unit/domain/unified-file-tool.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/domain/tools/unified-file-tool.js' from 'tests/unit/domain/unified-file-tool.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mUnifiedFileTool[39m } [36mfrom[39m [32m'../../../src/domain/tools/unified-file-tool.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { [33mToolExecutionContext[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/tool-system.js'[39m[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m [36mlet[39m rootDir[33m:[39m string[33m;[39m
     [90m 10 |[39m [36mlet[39m outsideFile[33m:[39m string[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/domain/unified-file-tool.test.ts:7:32)

FAIL tests/unit/core/types.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from 'tests/unit/core/types.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/types.test.ts:7:24)

FAIL tests/unit/core/types-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/types/global.types' from 'tests/unit/core/types-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  7 |[39m   [33mApplicationError[39m[33m,[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m  8 |[39m   [33mValidationError[39m[33m,[39m
     [90m  9 |[39m   [33mSecurityError[39m[33m,[39m
     [90m 10 |[39m   [33mNotFoundError[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/types-simple.test.ts:7:24)

FAIL tests/unit/core/logger-simple.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from 'tests/unit/core/logger-simple.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m describe([32m'Logger Enterprise System'[39m[33m,[39m () [33m=>[39m {
     [90m 10 |[39m   [36mlet[39m testLogger[33m:[39m [33mLogger[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/logger-simple.test.ts:7:18)

FAIL tests/unit/core/logger.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/logger' from 'tests/unit/core/logger.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [36mimport[39m { [33mLogger[39m[33m,[39m logger } [36mfrom[39m [32m'../../../src/core/logger'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  7 |[39m [36mimport[39m { join } [36mfrom[39m [32m'path'[39m[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m  8 |[39m [36mimport[39m { existsSync[33m,[39m unlinkSync[33m,[39m readFileSync } [36mfrom[39m [32m'fs'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m { homedir } [36mfrom[39m [32m'os'[39m[33m;[39m
     [90m 10 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/logger.test.ts:7:18)

FAIL tests/unit/core/cycle-detection.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/planning/enhanced-agentic-planner.js' from 'tests/unit/core/cycle-detection.test.ts'

    [0m [90m  6 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach } [36mfrom[39m [32m'@jest/globals'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m {
    [31m[1m>[22m[39m[90m  8 |[39m   [33mEnhancedAgenticPlanner[39m[33m,[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m  9 |[39m   [33mTask[39m[33m,[39m
     [90m 10 |[39m   [33mPlanningContext[39m[33m,[39m
     [90m 11 |[39m } [36mfrom[39m [32m'../../../src/core/planning/enhanced-agentic-planner.js'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/core/cycle-detection.test.ts:8:39)

FAIL tests/unit/application/synthesis-coordinator-telemetry.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/core/observability/observability-system.ts' from 'tests/unit/application/synthesis-coordinator-telemetry.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mSynthesisCoordinator[39m } [36mfrom[39m [32m'../../../src/core/application/synthesis-coordinator.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m { [33mDependencyContainer[39m } [36mfrom[39m [32m'../../../src/core/di/dependency-container.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m [36mimport[39m {
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 4 |[39m   [33mCLIENT_TOKEN[39m[33m,[39m
     [90m 5 |[39m   [33mCACHE_COORDINATOR_TOKEN[39m[33m,[39m
     [90m 6 |[39m   [33mSECURITY_VALIDATOR_TOKEN[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/synthesis-coordinator-telemetry.test.ts:3:6)

FAIL tests/unit/application/service-factory-disposal.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../../src/application/services/service-factory.js' from 'tests/unit/application/service-factory-disposal.test.ts'

    [0m [90m 1 |[39m [36mimport[39m { [33mServiceFactory[39m } [36mfrom[39m [32m'../../../src/application/services/service-factory.js'[39m[33m;[39m
     [90m 2 |[39m [36mimport[39m type { [33mILogger[39m } [36mfrom[39m [32m'../../../src/domain/interfaces/logger.js'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 3 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 4 |[39m describe([32m'ServiceFactory disposal'[39m[33m,[39m () [33m=>[39m {
     [90m 5 |[39m   [36mfunction[39m createTestLogger()[33m:[39m [33mILogger[39m {
     [90m 6 |[39m     [36mreturn[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/application/service-factory-disposal.test.ts:3:30)

FAIL tests/unit/response-system.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/response-types' from 'tests/unit/response-system.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mResponseFactory[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mResponseValidator[39m[33m,[39m
     [90m   |[39m                          [31m[1m^[22m[39m
     [90m 5 |[39m   [33mAgentResponse[39m[33m,[39m
     [90m 6 |[39m   [33mSynthesisResponse[39m[33m,[39m
     [90m 7 |[39m   [33mToolResponse[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/response-system.test.ts:4:26)

FAIL tests/unit/living-spiral.test.ts
  ‚óè Test suite failed to run

    Cannot find module './voice-system-coordinator.js' from 'src/voices/voice-archetype-system.ts'

    Require stack:
      src/voices/voice-archetype-system.ts
      tests/unit/living-spiral.test.ts

    [0m [90m 2 |[39m   [33mVoiceSystemCoordinator[39m[33m,[39m
     [90m 3 |[39m   [33mVoiceArchetypeSystem[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mCouncilMode[39m[33m,[39m
     [90m   |[39m                                   [31m[1m^[22m[39m
     [90m 5 |[39m } [36mfrom[39m [32m'./voice-system-coordinator.js'[39m[33m;[39m
     [90m 6 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/voices/voice-archetype-system.ts:4:37)
      at Object.<anonymous> (tests/unit/living-spiral.test.ts:5:34)

FAIL tests/unit/advanced-synthesis.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../../src/core/advanced-synthesis-engine' from 'tests/unit/advanced-synthesis.test.ts'

    [0m [90m 2 |[39m [36mimport[39m {
     [90m 3 |[39m   [33mAdvancedSynthesisEngine[39m[33m,[39m
    [31m[1m>[22m[39m[90m 4 |[39m   [33mSynthesisMode[39m[33m,[39m
     [90m   |[39m                                     [31m[1m^[22m[39m
     [90m 5 |[39m   [33mWeightingStrategy[39m[33m,[39m
     [90m 6 |[39m   [33mConflictResolutionStrategy[39m[33m,[39m
     [90m 7 |[39m } [36mfrom[39m [32m'../../src/core/advanced-synthesis-engine'[39m[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/unit/advanced-synthesis.test.ts:4:37)


Test Suites: 160 failed, 12 passed, 172 total
Tests:       24 failed, 300 passed, 324 total
Snapshots:   0 total
Time:        66.36 s
Ran all test suites.
